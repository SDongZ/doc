http://linux.about.com/od/linux101/l/blnewbie5_1.htm
Linux Shortcuts and Commands
Part 5 of the Linux Newbie Administrator Guide




ubuntu界面操作，下面的文档配置  及 命令行

http://blog.csdn.net/hustwarhd/article/details/3069066
startx启动过程分析
tartx的用法和xinit的基本一样：startx [ [ client ] options ... ] [ -- [ server ] options ... ]。
为什么呢？这是因为startx其实就是一个脚本，它启动X server就是通过调用xinit命令实现的，startx的参数将全部传给xinit。
因此，这些参数的意义和xinit的参数是一样的

System Settings can be run from the launcher (pinned by default), the Dash, or the power cog. But what command would I enter in a terminal window if I want to run it from there?
gnome-control-center 
Hope this helps you

如果隔一段时间不操作，电脑就会锁屏。怎么把锁屏给去掉
怎么不让ubuntu锁屏
Ubuntu小技巧――禁用Ubuntu的屏幕锁定
http://os.51cto.com/art/201310/413549.htm
登录Ubuntu，点击控制选项（位于菜单栏的最右边的图标）图标并选择“系统设置”
点击系统设置面板里的“亮度和锁屏”图标
最后，关闭“锁定屏幕选项”

操作系统Ubuntu 10.10
在菜单“系统”-》“系统管理”-》“用户和组”设置里有个密码“登录时不询问”已经修改为登录时不询问密码打钩；

系统重新启动不需要输入密码了。
顺便问一下挂起和睡眠后再启动系统总是需要输入密码，如何取消？

ubuntu12.04如何设置系统不休眠和不挂起
我的是桌面版的，在系统更新或者安装软件的时候，往往需要比较长的时间，但是过了一定时间，系统就会自动锁定屏幕，并且关闭网络连接，之前未完成的任务就无法继续了。
官网上说，12.04默认关闭了休眠功能，但是我从电池选项中修改设置如下，还是不行，求高手解答


关闭xorg图形界面
ctrl+ale+F3进入字符界面
ctrl+alt+f1启动shell登录 也可进入字符界面
alt+Ctrl+f7 再回到图形界面

tty'n',是文本模式下的控制台,n代表第几个控制台,可以用CTRL+ALT+F1...F7来切换

重启命令：
1、reboot
2、shutdown -r now 立刻重启(root用户使用)
3、shutdown -r 10 过10分钟自动重启(root用户使用) 
4、shutdown -r 20:35 在时间为20:35时候重启(root用户使用)
如果是通过shutdown命令设置重启的话，可以用shutdown -c命令取消重启
关机命令：
1、halt   立刻关机
2、poweroff  立刻关机
3、shutdown -h now 立刻关机(root用户使用)
4、shutdown -h 10 10分钟后自动关机
如果是通过shutdown命令设置关机的话，可以用shutdown -c命令取消重启


怎么修改etc/init目录下的配置文件？
以root权限用gedit打开文件 
用sudo gedit filename 来打开，不行，报错；
用su，然后输入密码，再gedit filename ，也不行，报错；
如何做？用su - （中划线代表用户名）
输入： su -
输入： 密码
再 gedit filename
OK


linux 常用命令
ls ll

这个不应该称得上是一个问题，但是，发现对于新手，确实是个难题因为少有人能够提到这一点，基本都是上来就直接讲用到的命令。
我开始的时候也曾经被这个问题困扰着，后来，搜了一会儿才弄明白。
1.在菜单内的附件上面有
2.在运行命令的输入框打开
3.快捷方式
4.快捷键
很好弄，在左上角的菜单上点一下，出来一列，在里面选择［附件］ 中的［终端］，点一下就OK。
那是快捷执行图标，可以把图标拖到桌面然后释放，以后在桌面上直接执行。同理，可以拖到上面的任务 栏里面。以后在上面的任务栏点一下就行了。
也不难弄，但不好找。首先按住Alt，然后按一下F2，出来一个运行框，在里面输入 gnome-terminal即可运行。
在这个运行框里，可以执行很多命令，想当于windows的［运行］。
把终端窗口打开放在鼠标右键，效果是在桌面或文件夹内的空白处右键点击，将出现“从终端打开”的快捷方式。那个需要使用一个软件。
安装很简单，打开终端，在里面输入: 
[c-sharp] view plaincopy
sudo apt-get install nautilus-open-terminal   

然后系统就在右键中自动添加该快捷方式了。
Ctrl+Alt+T，快捷键搞定（多谢霜晓雄鹰的评论）


xinit启动X Window System过程初探 (初始化 X Window System)
启动X主要有两种方法：一是Display Manager，如XDM、GDM、KDM，此种方法通过图形界面登录；另一种是通过xinit，此种方法适用于字符界面登录。

LightDM的目标是创造一个轻量、快速、具扩充性以及多桌面环境的X显示管理器[6]。它使用了很多不同的前端来渲染出登录画面[7]，所以又被称为Greeters
LightDM在Ubuntu 12.04作为默认的Unity登录前端

https://wiki.archlinux.org/index.php/Display_Manager_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)
显示管理器或登录管理器是一个在启动最后显示的图形界面。和窗口管理器一样，显示管理器有很多种。通常每个显示管理器都能进行一些定制
XDM: X 显示管理器 (xorg-xdm)
GDM: GNOME 显示管理器 (gdm)
KDM: KDE 显示管理器 (kdebase-workspace)
SLiM: 简单登录管理器 (slim)
LXDM: LXDE 显示管理器 (独立于桌面环境) (lxdm)
Qingy: getty 使用 DirectFB 的替代者 (qingy)
wdm: WINGs 显示管理器 (wdm)
CDM: 控制台显示管理器 (available in the AUR: cdm-git)
LightDM: Ubuntu 开发的 GDM 替代品，使用 WebKit (位于AUR: lightdm, lightdm-bzr)

http://www.embedu.org/Column/Column65.htm
很多LINUX初学者在学习linux图形方面的知识时会遇到一些概念，如：X、X11、Xfree86、WM、KDE、GNOME、QT、QT/E、Qtopia、DirectFB、Framebuffer、显卡加速驱动等等。理解它们之间是什么关系，对我们学习来说是非常重要的。写这篇文章的目的，就是想让大家明晰这些概念及它们之间的关系。（部分内容引用网络上的一些描述比较清晰的内容）
X11表示X协议的第16版.X11R6是X协议第11版第六次发行

XFree86 是X Windows server的X11R6执行程序.
有了协议就需要具体的软件来实现这个协议.
Xfree86是按照X协议的规定来完成X应用程序提交的在屏幕上显示的任务.
实现X协议的软件也并不只有XFree86, XFree86只是实现X协议的一个免费X服务器软件.
有些甚至能够在WINDOWS上有X服务器运行,这样您能够在linux系统上运行一个X应用程序然后在另一台windows系统上显示.
只是在LINUX上最常用的是XFree86.不过现在的linux发行版大多用Xorg了

窗口管理器的作用就是最大化、最小化、移动、关闭窗口等.而这些不是X服务器来负责完成的

KDE 和GNOME是LINUX里最常用的图像界面操作环境,他们不但仅是个窗口管理器那么简单, KDE是K Desktop Environment 的缩写,他不但是个窗口管理器,更有很多配套的应用软件和方便使用的桌面环境,比如任务栏,开始菜单,桌面图标等等.GNOME是GNU Network Object Model Environment 的缩写,和KDE相同,也是个功能强大的综合环境

QT/E 是用于嵌入式Linux系统的QT版本.QT/E中去掉了X lib的依赖而直接工作于Frame Buffer上,因而应用程序处理过程效率比较高.它的运行只要有Framebuffer设备就可以了,不需要X服务器的支持.但其本身运行也是有服务器和客户端的概念

DirectFB项目是由德国Convergence公司推动的Open source计划的一部分,它是专门为满足嵌入式设备要求而开发的小巧、强大、灵活和易于使用的图形系统,并且试图成为一个建构于Linux Framebuffer Device之上的新图形标准.它在FrameBuffer的基础上提供了图形加速、输入设备处理提取、透明窗口和多重显示层的功能,能够对嵌入式系统GUI有较好的支持.与那些通用的嵌入式GUI系统相比,它具有非常简洁、高效的体系结构和硬件图形加速功能

http://www.cnblogs.com/montya/archive/2011/09/09/2172001.html  rc.local开机器不执行.png
解决linux下/etc/rc.local开机器不执行的原因
前不久因项目需要写了开机启动其他程序的shell脚本,因工作忙，调试完给了技术支持人员，也没去注意过。

到后来，有几台服务器突然被重启了，这时候领导问，怎么开机启动的脚本没起作用，还被批了一顿，哎，做事虎头蛇尾,活该！

然后去查，一直没查到原因，

手动执行都是正确的，在排除了权限原因和脚本问题后，很郁闷，怎么放到开机启动项目中就无法执行了呢。

于是去查linux开机启动过程信息。google下，看了下关于一些开机启动启的资料，发现了开机启动程序的级别为3.

果断顺藤莫瓜，找到了这个目录 /etc/rc.d/rc3.d，进去一看恍然大悟。



我的rc.local文件是在 /etc/rc.local中（网上都是说写在这里，我是按照网上来弄的），而我查看了系统指向rc.local文件的路径是 /etc/rc.d/rc.local

后来把开机启动的脚本配置到/etc/rc.d/rc.local中（或者把S99local指向 /etc/rc.local也行），重启检查，成功！

总结:主要还是对linux系统不熟悉，这是个漫长的过程，有时间得多看看这方面的书籍。


改rc.local文件开机自动运行脚本
1.开机自运行
简单的处理开机自运行的方法是修改rc.local文件。此文件位于/etc目录下面.
在默认情况下，rc.local是一个空的脚。您只要修改它就可以了。要注意的是，在此文件中运行的命令其依赖的进程是否运行。本人再实验的时候由于想在
开机时启动dia.试了好多次都失败。我想可能是界面进程还没有启动。我的实验脚本为
       echo   “hello. rc.local” >>home/shanfeng/rc.local 实验成功
在/etc目录下面还有rc*.d的目录。这些目录里面放在很多/etc/init.d/下面脚本的软链接,操作系统根据不同的运行等级，选择运行其中下的脚本。您也可以修改它们达到开机自运行的目的。
2。定时任务
介绍一种简单的处理方式
用cron处理定时任务,首先要保证cron操作已经运行。如果安装了cron 的话。正常情况下cron已经开机自运行了，如果没有运行的话。
/etc/init.d/cron start
用crontab来安排定时任务
crontab [-u user] {-l| -r |   -e}
-l:显示任务
-e:编辑任务
-r:清空任务
任务格式为:
分 时 星期 月份 年 操作命令
eg:
1. * 14 * * * echo ” look me”>>/home/shanfeng/test 表示每天14点运行一次
2. 0-59/2 * * * * echo “look me” >>/tmp/test 表示每两分钟运行一次
3. * 2,15 * * * echo “look me ” >>/tmp/test 表示2与15点运行一次
* : 表示任意 -:表示区间.   / :表示频率   , ：表示枚举

http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html
Linux 的启动流程
开机启动程序加载完毕以后，就要让用户登录了。

一般来说，用户的登录方式有三种：
　　（1）命令行登录
　　（2）ssh登录
　　（3）图形界面登录
这三种情况，都有自己的方式对用户进行认证。
（1）命令行登录：init进程调用getty程序（意为get teletype），让用户输入用户名和密码。
输入完成后，再调用login程序，核对密码（Debian还会再多运行一个身份核对程序/etc/pam.d/login）。
如果密码正确，就从文件 /etc/passwd 读取该用户指定的shell，然后启动这个shell。
（2）ssh登录：这时系统调用sshd程序（Debian还会再运行/etc/pam.d/ssh ），取代getty和login，然后启动shell。
（3）图形界面登录：init进程调用显示管理器，
Gnome图形界面对应的显示管理器为gdm（GNOME Display Manager），
然后用户输入用户名和密码。
如果密码正确，就读取/etc/gdm3/Xsession，启动用户的会话

linux 在字符界面中如何查看超出屏幕显示范围的内容
你是不是指哪些被滚到屏幕上面的部分？可以用shift+pageUp/pageDown进行滚动

Linux字符界面下对界面进行翻页的几个操作
1.如果文件内容很长，不用 cat命令查看，而使用less、more这样单页显示的工具。
2.使用编辑器 view（vi的只读版本）、nano 等都可以。
3.使用输出重定向符号 ">"，把显示的内容重定向到文件中去，再来查看。
如：假如当前文件夹中有很多文件，要查看文件的信息，可以用>把ls的输出由stdout重定向到指定文件filelist中：ls -l > filelist
4.不得不翻屏的时候可以使用 Shift+PageUp/PageDown，但能翻的不多

cat aa.txt | more
yourcmd | less  例如  ll /etc/init.d | more
yourcmd | more
less textfile
vi testfile

sudo kill 3486

http://tldp.org/LDP/gs/gs.html
Linux Installation and Getting Started

Bootable floppies for PCs usually contain MS-DOS or miniature versions of Linux. The most commonly available floppy disk can hold only 1.4 MB of data in its standard format, making it impractical for loading large operating systems. The use of boot floppies is in decline, due to the availability of other higher-capacity options, such as CD-ROMs or USB flash drives.

The first step is to boot the Linux installation media. In most cases, this is a “Bootable floppies” which contains a small Linux system.
http://www.linfo.org/make_linux_boot_floppy.html
http://www.pendrivelinux.com/boot-multiple-iso-from-usb-via-grub2-using-linux/

Distributions described as lightweight[edit]

Alpine Linux - A security-oriented, lightweight Linux distribution based on uClibc and BusyBox.[4] Mini download is 60 MB; base system (excluding kernel) is under 5 MB.
antiX - Lightweight version of its parent distribution MEPIS Linux, based on Debian testing. Core Install: 128 MB, Base approx 300 MB. Package Manager: Synaptic[5]
BasicLinux - A very lightweight distribution capable of running on an Intel 386 and 3 MB of RAM[6][7]
Bodhi Linux - A lightweight and minimalistic distribution, based on Ubuntu 12.04[8]
CrunchBang Linux - A relatively large (771MB) Debian based distribution designed primarily for speed and ease of use.[9][10]
Damn Small Linux - Download 50 MB. Additional software available as "DSL Extensions" and using the Debian APT tool, which has to be installed. "Light enough to power a 486DX with 16MB of Ram"[11][12]
Feather Linux - Lightweight Linux Distribution derived from Knoppix. Now dormant.[13][14]
Lubuntu - Lightweight in comparison to Ubuntu, it uses the LXDE desktop.[1]
Nanolinux - 14 MB distribution based on Core Linux. [15]
Peppermint Linux OS - Based on Lubuntu.[16]
Porteus - It weighs in at under 300 MB, making it a lightweight contender.[17] Comes with the LXDE and KDE desktops
Puppy Linux - Lightweight relative to most other Linux distributions.[18] Download: 133MB. Package Manager: Synaptic (Lucid Puppy Ubuntu Compatible version)
Semplice Linux lightweight, fast and simple, based on Debian Sid.[19]
SliTaz - 35 MB distribution. Package Manager is Tazpkg with its repository of packages[11]
Tiny Core Linux - 12 MB distribution. Software repository: TCZ packages[20]
Trisquel Mini - Lightweight version of Trisquel with LXDE[21]

http://en.wikipedia.org/wiki/Windows_To_Go
Windows To Go是Windows 8的一种企业功能，被内置于Windows 8企业版（Windows 8 Enterprise）中。
[1]对于满足Windows 8硬件要求的电脑，Windows To Go可使Windows 8从USB驱动器中启动并运行，不必考虑电脑上运行的操作系统（Mac和Windows RT不被支持）。
[1-2]Windows To Go 的设计并不旨在代替台式计算机、便携式计算机，或取代其他移动产品。 
恰恰相反，它为有效使用备用的工作场所方案资源提供有力支持

/etc 

etc不是什么缩写，是and so on的意思 来源于 法语的 et cetera 翻译成中文就是 等等 的意思. 至于为什么在/etc下面存放配置文件， 按照原始的UNIX的说法(linux文件结构参考UNIX的教学实现MINIX) 这下面放的都是一堆零零碎碎的东西, 就叫etc, 这其实是个历史遗留.

这个目录一般用来存放程序所需的整个文件系统的配置文件.

守护进程，也就是通常说的Daemon进程，是Linux中的后台服务进程
在linux或者unix操作系统中在系统的引导的时候会开启很多服务，这些服务就叫做守护进程。为了增加灵活性，root可以选择系统开启的模式，这些模式叫做运行级别，每一种运行级别以一定的方式配置系统。 守护进程是脱离于终端并且在后台运行的进程。守护进程脱离于终端是为了避免进程在执行过程中的信息在任何终端上显示并且进程也不会被任何终端所产生的终端信息所打断

status state 区别
status 与 state 的区别

status 指人时暗指相对的地位，指物时相当于 situation。

state 人或物存在或所处的状态，和 condition 大体上可以互换使用。

 

situation 较狭义地指由环境综合决定的特定时间上的状态或情形。

condition 指一定的原因/条件或环境所产生的特定情况。

 

以 Recordset 为例

Recordset 具有 Status 和 State 属性，说明二者还是有区别的。

Recordset.Status 表示进行批处理后，当前记录的情况。结果有：操作被取消，结果未被保存；记录被锁无法保存……。

Recordset.State 表示 Recordset 对象是打开的，还是关闭的，还是正在执行异步操作。

 

再举例子

最近的国际形式如何？status。

水在标准大气压下 100 摄氏度时是什么状态？state。


善用backtrace解决大问题
一．用途：
主要用于程序异常退出时寻找错误原因
二．功能：
回溯堆栈，简单的说就是可以列出当前函数调用关系
三．原理：
1． 通过对当前堆栈的分析，找到其上层函数在栈中的帧地址，再分析上层函数的堆栈，再找再上层的帧地址……一直找到最顶层为止，帧地址指的是一块：在栈上存放局部变量，上层返回地址，及寄存器值的空间。
2． 由于不同处理器堆栈方式不同，此功能的具体实现是编译器的内建函数__buildin_frame_address及__buildin_return_address中，它涉及工具glibc和gcc, 如果编译器不支持此函数，也可自己实现此函数，举例中有arm上的实现

利用backtrace和backtrace_symbols函数打印调用栈信息
在头文件"execinfo.h"中声明了三个函数用于获取当前线程的函数调用堆栈。

#include <execinfo.h>
 int backtrace(void **buffer, int size);
 char **backtrace_symbols(void *const *buffer, int size);
 void backtrace_symbols_fd(void *const *buffer, int size, int fd);
 
 void backtrace_symbols_fd (void *const *buffer, int size, int fd)
    backtrace_symbols_fd与backtrace_symbols 函数具有相同的功能,不同的是它不会给调用者返回字符串数组,而是将结果写入文件描述符为fd的文件中,每个函数对应一行.它不需要调用malloc函数,因此适用于有可能调用该函数会失败的情况
	backtrace_symbols_fd(buffer, nptrs, STDOUT_FILENO)

Vinagre 是新近才出现的 VNC 客户端，它主要为 GNOME 桌面环境而设计。Vinagre 的主要功能包括：能够同时连接多个机器，可以收藏经常使用的连接，支持浏览 VNC 服务器网络，不需要为每个连接都提供密码等等

GtkWidget转换为GObject类型，格式一般为G_OBJECT(button)
GTK_WINDOW
GTK_DIALOG

GTK-WARRING:  cannot  open  display!
#include <gtk/gtk.h>  <--用到了图形库，当然不能在字符模式下运行了，在GNOME下可以正常运行   x server没有启动.
setenv DISPLAY 192.168.0.1:0  
指定一个GUI的接受端即可

尝试在纯字符界面下运行Gtk的界面程序，提示信息：cannot open display。
ioctl是设备驱动程序中对设备的I/O通道进行管理的函数。所谓对I/O通道进行管理，就是对设备的一些特性进行控制，例如串口的传输波特率、马达的转速等等。它的调用个数如下：int ioctl(int fd, int cmd, …)；其中fd就是用户程序打开设备时使用open函数返回的文件标示符，cmd就是用户程序对设备的控制命令，至于后面的省略号，那是一些补充参数，一般最多一个，有或没有是和cmd的意义相关的。ioctl函数是文件结构中的一个属性分量，就是说如果你的驱动程序提供了对ioctl的支持，用户就能在用户程序中使用ioctl函数控制设备的I/O通道。


GTK(GIMP Toolkit)是一个Linux平台下基于Xwindow图形窗口的图形用户编程接口工具,可以借助它来开发Linux平台下基于Xwindow的图形用户界面。
这是不是意味着Gtk小程序不能在纯字符界面下运行？？我也不确定，但是minigui写的就可以，所以不死心，想问问谁能给个确切的答案

你都说了，人家gtk本身就是一套“图形用户编程接口工具”，程序里调用gtk的函数当然就是为了显示图形，你不启图形当然不成。

不是这样的，可以不启用Gnome这样的GUI环境，但只要所运行的程序的底层库已加载，Xserve有支持（或是直接用FB驱动），就可以运行图形程序，比如嵌入式系统就是这样的

gtk_window_fullscreen ()
void                gtk_window_fullscreen               (GtkWindow *window);
Asks to place window in the fullscreen state. Note that you shouldn't assume the window is definitely full screen afterward, because other entities (e.g. the user or window manager) could unfullscreen it again, and not all window managers honor requests to fullscreen windows. But normally the window will end up fullscreen. Just don't write code that crashes if not.

You can track the fullscreen state via the "window-state-event" signal on GtkWidget.

window :a GtkWindow

spicy 鼠标退出虚拟机的方法 shift+f12
spicy fullscreen escape
To get out use Shift+F12, not logical I know, but it works :)

SPICE建立Channel的详细步骤及消息传递流程
s: reds_init_net, 注册回调reds_accept 创建listen socket，增加监听watch_add(reds_accept),后续加入select监听

c: RedChannel::run-》RedChannelBase::connect() -》RedPeer::connect_unsecure发送连接请求，等待服务端accept

s: reds_accept
    -》spice_server_add_client，reds_handle_new_link
        -》async_read_handler，异步接收数据，需要客户端发送数据，填充link->link_header结束
c: RedChannelBase::link() -》link_mess.channel_type = _type，send 发送link请求，recive等待
s:            -》reds_handle_read_header_done，
                -》async_read_handler，填充link->link_mess
                    -》reds_handle_read_link_done
                        ―》async_read_handler，填充link->auth_mechanism
                            ->reds_handle_auth_mechanism
                                ->reds_get_spice_ticket
                                   ―》async_read_handler，填充link->tiTicketing.encrypted_ticket.encrypted_data
                                       ―》 reds_handle_ticket
                                           ->reds_handle_link
                                             ->if (link->link_mess->channel_type == SPICE_CHANNEL_MAIN) { reds_handle_main_link(link); }

   async_read_handler-》reds_stream_read堵塞，等待客户端发送消息
 
reds_handle_main_link流程
    -》reds_send_link_result(link, SPICE_LINK_ERR_OK);

c->s: SPICE_CHANNEL_MAIN s: reds_handle_main_link，此过程的详细步骤如上

s->c: SPICE_MSG_MAIN_INIT, c: handle_init

c->s: SPICE_MSGC_MAIN_ATTACH_CHANNELS s: reds_send_channels

s->c: SPICE_MSG_MAIN_CHANNELS_LIST c: handle_channels



gtk 的控件是建立在goject的基础上的, 换句话说, gtk的所有控件都是从gobject派生而来. 如果要学习 gtk 的对象模型, 可以参考 gobject 的相关实现. 

gtk 的控件家族中, 大部分都是所谓的 gtk widget。
gtk widget 是gtk抽象出来的一个上层概念, 这样的一个widget, 在中文的表述中就代表一个控件。
这样的widget只是逻辑上的, 也就是说, 在逻辑上它是一个控件, 实际上可能并没有单独的窗口资源和它相应。

所以在 gtk 的控件家族中, 从这个角度可以将 widget 分成两类:

1. widget 有真正的窗口资源和它对应, 比如一个 toplevel 的 GtkWindow, 在gtk的底层会有一个GdkWindow和它相对应。
一个GdkWindow, 在 X11 中就对应于一个 X11 的window。
在 gtk 中, 只能在 GdkWindow 上进行绘图。
这样的控件, 我们可以为它设置背景,窗口的背景一旦设置, 就由XServer负责在必要的时候重绘。
而对于前景, 在适当的时候(当窗口由不可见到可见), XServer会发送Expose消息给这样的控件。
控件根据需要在前景上进行重绘, 在gtk的实现中, 控件都会实现自己的expose消息处理函数。

这个消息为 RUN_LAST方式运行, 
所以当用户自己用 g_signal_connect 注册了一个 expose 消息处理, 
并且在消息处理函数中 return TRUE, 就会将这个默认的消息变成无效, 
所以如果对 gtk 自己提供的绘制功能不满意的话,
可以利用这种手段自己实现某些绘制功能.

2. widget 没有单独的一个 GdkWindow 和它相对应, 
比如 gtk button 就是这样的一个控件,
自己没有单独的 GdkWindow, 
当这样的控件需要绘制的时候, 就会在父控件的GdkWindow上绘制. 

比如gtk button, 假设一个 button 在一个 toplevel 的窗口中, 
当窗口从不可见到可见的时候, XServer 就会给 toplevel window 发送 expose event, 
由于toplevel 是一个container, toplevel window 在响应自己的 expose 之后, 
会向所有的没有 GdkWindow 的子控件(button)发送 expose event, 
当 button 收到消息后, 就会在它的父 widget(toplevel window) 的相应位置绘制自己.

如果要实现不规则的窗口, 只能使用第一类控件.

window7打开用户目录 C:\Users
                    C:\Users\Administrator\AppData\Roaming

backslash (\ or slash (/)

chkdsk基于所用的文件系统，创建和显示磁盘的状态报告。Chkdsk 还会列出并纠正磁盘上的错误。如果不带任何参数，chkdsk 将显示当前驱动器中的磁盘状态。

语法
chkdsk [volume:][[Path] FileName] [/f] [/v] [/r] [/x] [/c] [/l[:size]]

参数
volume: 
指定驱动器号（冒号分隔）、装入点或卷名。 
[Path} FileName] 
指定需要 chkdsk 检查碎片整理的文件或文件集的位置和名称。使用通配符（* 和 ?）可以指定多个文件。 
/f 
修复磁盘上的错误。必须锁定磁盘。如果 chkdsk 无法锁定驱动器，则会显示一条消息，询问您是否希望在下次重新启动计算机时检查该驱动器。 
/v 
当检查磁盘时，显示所有目录中每个文件的名称。 
/r 
找到坏扇区并恢复可读取的信息。必须锁定磁盘。 
/x 
仅在 NTFS 上使用。如果必要，首先强制卸载卷。该驱动器的所有打开句柄都无效。/x 还包含了/f 的功能。 
/i 
仅随 NTFS 使用。对索引项执行充分检查，降低运行 chkdsk 的所用时间量。 
/c 
仅随 NTFS 使用。跳过文件夹结构中的周期检查，减少运行 chkdsk 所需的时间量。 
/l[:size] 
仅随 NTFS 使用。将日志文件的大小更改为由用户输入的大小。如果省略该参数，则 /l 会显示当前日志文件的大小。 
/?
在命令提示符显示帮助。 
注释
运行 chkdsk 
要在固定磁盘上运行 chkdsk 命令，您必须是该 Administrators 组的成员。

重新启动时检查锁定的驱动器 
如果希望 chkdsk 修复磁盘错误，则此前不能打开该驱动器上的文件。如果有文件打开，会显示下述错误消息：

Chkdsk cannot run because the volume is in use by another process.Would you like to schedule this volume to be checked the next time the system restarts?(Y/N)

使用 Ubuntu 软件中心搜索synaptic，找到“新立得软件包管理器”，一般第一个搜索结果就是了;


如果选择下次重新启动计算机时检查该驱动器，则重新启动计算机后 chkdsk 会自动检查该驱动器并修复错误。如果该驱动器分区为启动分区，则 chkdsk 在检查完该驱动器后会自动重新启动计算机。

报告磁盘错误 
chkdsk 命令会检查磁盘空间和文件分配表 (FAT)以及 NTFS 文件系统的使用情况。Chkdsk 在状态报告中提供特定于每个文件系统的信息。状态报告显示文件系统中找到的错误。在活动分区上运行 chkdsk 时，如果未含 /f 命令行选项，则它可能会因为无法锁定该驱动器而报告虚假信息。应该不定期使用 chkdsk 检查每个磁盘上的错误。

修复磁盘错误 
只有指定 /f 命令行选项，chkdsk 命令才修复磁盘错误。Chkdsk 必须可以锁定驱动器以纠正错误。由于修复通常会更改磁盘的文件分配表，有时还会丢失数据，所以 chkdsk 会首先发送如下所示的确认消息：

10 lost allocation units found in 3 chains.

Convert lost chains to files?

如果按 Y，Windows 会在根目录中将所有丢失链保存在一个名为 Filennnn.chk 的文件中。chkdsk 结束后，可以查看这些文件是否包含了所需的数据。如果按 N，Windows 会修复磁盘，但对于丢失的分配单元，它不保存其内容。

如果不使用 /f 命令行选项，则在有文件需要修复时，chkdsk 会发送消息，但它不修复任何错误。

如果在大磁盘（例如，70 GB）或有大量文件（数百万）的磁盘上使用 chkdsk /f，这可能要花很长时间（比如说，数天）才能完成。因为 chkdsk 直到工作完成它才会交出控制权，所以计算机在这段时间内将不可用。

检查 FAT 磁盘 
Windows 以下列格式显示 FAT 磁盘的 chkdsk 状态报告：

Volume Serial Number is B1AF-AFBF

72214528 bytes total disk space

73728 bytes in 3 hidden files

30720 bytes in 12 directories

11493376 bytes in 386 user files

61440 bytes in bad sectors

60555264 bytes available on disk

2048 bytes in each allocation unit

35261 total allocation units on disk

29568 available allocation units on disk 

检查 NTFS 磁盘 
Windows 以下列格式显示 NTFS 磁盘的 chkdsk 状态报告：

The type of the file system is NTFS.

CHKDSK is verifying files...

File verification completed.

CHKDSK is verifying indexes...

Index verification completed.

CHKDSK is verifying security descriptors...

Security descriptor verification completed.

12372 kilobytes total disk space.

3 kilobytes in 1 user files.

2 kilobytes in 1 indexes.

4217 kilobytes in use by the system.

8150 kilobytes available on disk.

512 bytes in each allocation unit.

24745 total allocation units on disk.

16301 allocation units available on disk.

存在打开文件的情况下使用 chkdsk 
如果该驱动器上有打开的文件，则指定 /f 命令行选项后，chkdsk 会发送错误消息。如果未指定 /f 命令行选项并且存在打开的文件，则 chkdsk 会报告磁盘上丢失的分配单元。如果打开的文件没有记录在文件分配表时，可能会发生这种情况。如果 chkdsk 报告大量分配单元丢失，可以考虑修复该磁盘。

查找物理磁盘错误 
使用 /r 命令行选项可查找文件系统中的物理磁盘错误。

报告磁盘坏扇区 
在磁盘第一次准备运行时，chkdsk 报告的坏扇区标记为损坏。它们不会造成危险。
 chkdsk 完成任务后报告的退出码。
 
0 没有发现错误。 
1 错误已找到并修复。 
2 已执行清理磁盘（例如碎片收集），或者因为没有指定 /f 而未执行清理磁盘。 
3 由于未指定 /f 选项，无法检查磁盘，错误不能修复或错误未修复。 

故障恢复控制台提供了带有不同参数的 chkdsk 命令。 
范例
如果要检查驱动器 D 中的磁盘，并且希望 Windows 修复错误，请键入：

chkdsk d:/f

如果遇到错误，chkdsk 会暂停并显示消息。Chkdsk 完成任务时会显示列有磁盘状态的报告。除非 chkdsk 已完成任务，否则无法打开指定驱动器上的任何文件。

在 FAT 磁盘上，要检查当前目录中所有文件的不相邻块，请键入：

chkdsk *.*

Chkdsk 显示状态报告，然后列出符合具有不相邻块条件的文件。

spice-gtk 在Linux编译
autotools, relatively recent (some workaround like 'mkdir m4' mentioned below)
pixman >= 1.7.1 (any recent)
celt = 0.5.1.3 (this is important, newer versions use a different protocol)
alsa
log4cpp
openssl
libXrandr
cegui
libgcrypt-devel
pyparsing - only if you build from git (tarball releases don't require it)
dev86 (required for?)
iasl (and this?)
for smartcard:
nss

构建一个开发环境，第三库等等。

线程同步：
互斥体的类型  锁的类型
        typedef unique_lock<mutex> scoped_lock;
        typedef detail::try_lock_wrapper<mutex> scoped_try_lock;

boost condition(创建，销毁，发送信号，等待锁+条件) 、 mutex+lock , 

Differences between <semaphore.h> and <sys/sem.h>
<sys/sem.h> provides the interface for XSI (originally Unix System V) semaphores.
<semaphore.h> defines POSIX semaphores, which are designed in such a way that they can be implemented entirely in userspace, except in the contended case where the process will call into the kernel to go to sleep. 

信号量（英语：Semaphore）又称为号志，它以一个整数变量，提供信号，以确保在并行计算环境中，不同进程在访问共享资源时，不会发生冲突。是一种不需要使用忙碌等待（busy waiting）的一种方法。
信号量的概念是由荷兰计算机科学家艾兹格・迪杰斯特拉（Edsger W. Dijkstra）发明的，广泛的应用于不同的操作系统中。在系统中，给予每一个进程一个信号量，代表每个进程目前的状态，未得到控制权的进程会在特定地方被强迫停下来，等待可以继续进行的信号到来。如果信号量是一个任意的整数，通常被称为计数信号量（Counting semaphore），或一般信号量（general semaphore）；如果信号量只有二进制的0或1，称为二进制信号量（binary semaphore）。在linux系中，二进制信号量（binary semaphore）又称Mutex。

计数信号量具备两种操作动作，之前称为 V（又称signal()）与 P（wait()）。 V操作会增加信号量 S的数值，P操作会减少它。
运作方式：
初始化，给与它一个非负数的整数值。
运行 P（wait()），信号量S的值将被减少。企图进入临界区段的进程，需要先运行 P（wait()）。当信号量S减为负值时，进程会被挡住，不能继续；当信号量S不为负值时，进程可以获准进入临界区段。
运行 V（又称signal()），信号量S的值会被增加。退出离开临界区段的进程，将会运行 V（又称signal()）。当信号量S不为负值时，先前被挡住的其他进程，将可获准进入临界区段。

http://www.fullhan.com/cp_35.asp
FH8735 高性能H.264编码芯片

        FH8735是一款高性能的多通道视音频编码芯片，支持H.264 Main Profile和Baseline Profile。FH8735具有1路1920*1080，2路1280*720或者8路标清的实时编码能力、内置丰富的视频预处理功能和多样的I/O接口，可满足视频监控产品的各种需求，能有效提高产品的集成度并降低系统成本，为视频监控产业的高清化提供强大的编码动力。 
          FH8735的目标应用包括嵌入式DVR、视频采集卡、DVS和百万素网络摄像机
		  
		  富瀚微电子有限公司成立于2004年4月，专注于视频监控芯片及解决方案，满足高速增长的数字视频监控市场对视频编解码和图像信号处理的芯片需求。
   富瀚提供高性能视频编解码SoC和图像信号处理器芯片，以及基于这些芯片的视频监控产品方案。 
    富瀚致力于与国内外设备制造商、解决方案提供商建立紧密合作关系，共同把握市场契机，为客户提供高性价的产品和服务，持续创造价值

http://www.csdn.net/article/2014-01-03/2818015-tiny-hardware-development-boards-of-2013
2013年终盘点：10款最精巧的硬件开发板

// 此源文件在Windows平台上必须保存为Unicode格式（即UTF-16小尾）
// 因为包含的汉字“??”，不能在简体中文版Windows默认的代码页936（即GBK）中表示。
// 该汉字在UTF-16小尾序中用4个字节表示，
// Windows操作系统能正确显示这样的在UTF-16需用4字节表示的字符
// 但是Windows API不能正确处理这样的在UTF-16需用4字节表示的字符，把它判定为2个UCS-2字符
 
#include <windows.h>
int main()
{
	const wchar_t lwc[]=L"??";
 
	MessageBoxW(NULL, lwc, lwc, MB_OK);
 
	int i = wcslen(lwc);
	printf("%d\n", i);
	int j = lstrlenW(lwc);
	printf("%d\n", j);
 
	return 0;
}

UTF8 <-> UNICODE
Class template std::wstring_convert performs conversions between byte string std::string and wide string std::basic_string<Elem>, 
using an individual code conversion facet Codecvt. 
std::wstring_convert assumes ownership of the conversion facet, and cannot use a facet managed by a locale. 
The standard facets suitable for use with std::wstring_convert are std::codecvt_utf8 for UTF-8/UCS2 and UTF-8/UCS4 conversions and std::codecvt_utf8_utf16 for UTF-8/UTF-16 conversions

void test()
{
wstring_convert<codecvt_utf8_utf16<wchar_t>> converter;
string s8 = u8"This is a UTF8 string";
wstring s16 = converter.from_bytes(s8);
string s88 = converter.to_bytes(s16);
if (s8!=s88)
cerr <"Insane!\n";
}

string <-> number
to_string

Preventing Logoff or Suspend During a Burn
If proper precautions are not made within an application, it is possible for a user to log off during a burn operation. This leads to the interruption of the burn process, which can result in lost data and possibly render the disc unusable.
To avoid this problem, the application should process the WM_QUERYENDSESSION message which is delivered prior to log off. If the application receives this message while performing a burn operation, return FALSE to cancel the logoff procedure. If the application allows the user to decide whether to continue logging off, a warning should be provided indicating that user will lose data.
Power transitions during the burn process can also create potential problems in the success of a burn activity. Preventing these complications during the burn process requires an application to be aware of when power transitions are about to take place. This is accomplished by by enabling the application to process the WM_POWERBROADCAST message. Applications developed for Windows XP or Windows Server 2003 can return BROADCAST_QUERY_DENY in response to PBT_APMQUERYSUSPEND, preventing Suspend during the burn process.
Due to changes in the Power Management Model for Windows Vista and Windows Server 2008, the PBT_APMQUERYSUSPEND event is no longer delivered to applications. Instead the PBT_APMSUSPEND event is delivered, providing two seconds for an application to prepare for the transition.
As a result of these changes, it is recommended that applications call the SetThreadExecutionState function to prevent a system idle time-out which ordinarily results in the transition to Suspend. It is important to remember that calling this function with the appropriate flags set will only prevent system idle, not an in-progress Suspend.


http://stackoverflow.com/questions/1023306/finding-current-executables-path-without-proc-self-exe
Some OS-specific interfaces:

Mac OS X: _NSGetExecutablePath() (man 3 dyld)
Linux: readlink /proc/self/exe
Solaris: getexecname()
FreeBSD: sysctl CTL_KERN KERN_PROC KERN_PROC_PATHNAME -1
FreeBSD if it has procfs: readlink /proc/curproc/file (FreeBSD doesn't have procfs by default)
NetBSD: readlink /proc/curproc/exe
DragonFly BSD: readlink /proc/curproc/file
Windows: GetModuleFileName() with hModule = NULL

To summarize:

On Unixes with /proc really straight and realiable way is to:

readlink("/proc/self/exe", buf, bufsize) (Linux)

readlink("/proc/curproc/file", buf, bufsize) (FreeBSD)

readlink("/proc/self/path/a.out", buf, bufsize) (Solaris)

On Unixes without /proc (i.e. if above fails):

If argv[0] starts with "/" (absolute path) this is the path.

Otherwise if argv[0] contains "/" (relative path) append it to cwd (assuming it hasn't been changed yet).

Otherwise search directories in $PATH for executable argv[0].

Afterwards it may be reasonable to check whether the executable isn't actually a symlink. If it is resolve it relative to the symlink directory.

This step is not necessary in /proc method (at least for Linux). There the proc symlink points directly to executable.

Note that it is up to the calling process to set argv[0] correctly. It is right most of the times however there are occasions when the calling process cannot be trusted (ex. setuid executable).

On Windows: use GetModuleFileName(NULL, buf, bufsize)

boost 提出EXE当前路径
boost 从文件路径里提出 文件名，及路径

filesystem::path 类的成员
// decomposition 分解
        path  root_name() const;
        path  root_directory() const;
        path  root_path() const;
        path  relative_path() const;
        path  parent_path() const;
        path  filename() const;
        path  stem() const;
        path  extension() const;
		
 // query
        bool empty() const;
        bool has_root_name() const;
        bool has_root_directory() const;
        bool has_root_path() const;
        bool has_relative_path() const;
        bool has_parent_path() const;
        bool has_filename() const;
        bool has_stem() const;
        bool has_extension() const;
        bool is_absolute() const;
        bool is_relative() const;

		
// modifiers
        void  clear();
        path& make_absolute(const path& base);
        path& make_preferred();  // ISO/IEC 9945: no effect. Windows: convert slashes to backslashes
        path& remove_filename();
        path& replace_extension(const path& new_extension = path());
        void  swap(path& rhs);
		
#include <boost/filesystem.hpp>
std::string filename_noext;
filename_noext = boost::filesystem::path("D:\\files\\file.lua").stem().string().
const char* result_as_const_char = filename_noext.c_str();

wchar_t exe_path[MAX_PATH] = {0};
	::GetModuleFileName(GetModuleHandle(NULL), exe_path, MAX_PATH);
	::PathRemoveFileSpecW(exe_path);

IWebBrowser2
http://msdn.microsoft.com/en-us/library/aa752038(v=vs.85).aspx
Windows Internet Explorer's components can easily be reused thanks to its Component Object Model (COM)-based architecture. 
Two commonly used components are shdocvw.dll (the WebBrowser Control) and mshtml.dll (code-named "Trident").

BEGIN_EVENTSINK_MAP(CWebPageDlg, CDialogEx)
	ON_EVENT(CWebPageDlg, IDC_EXPLORER1, 259, CWebPageDlg::DocumentCompleteExplorer1, VTS_DISPATCH VTS_PVARIANT)
END_EVENTSINK_MAP()

Defines an OLE automation function in a dispatch map
DISP_FUNCTION(theClass, pszName, pfnMember, vtRetVal, vtsParams )

BEGIN_DISPATCH_MAP(CFixHtmlView, CHtmlView)
	DISP_FUNCTION(CFixHtmlView, "ParentLogin", ParentLogin, VT_BOOL, VTS_I4 VTS_I4)
	DISP_FUNCTION(CFixHtmlView, "ChildFinish", ChildFinish, VT_I4, VTS_I4 VTS_I4 VTS_BSTR)
	DISP_FUNCTION(CFixHtmlView, "ParentReg",ParentReg,VT_BOOL,VTS_I4 VTS_BSTR VTS_BSTR)
	DISP_FUNCTION(CFixHtmlView, "sessionOverTime",sessionOverTime,VT_I4, VTS_I4 VTS_I4)
	DISP_FUNCTION(CFixHtmlView, "eyeOver",eyeOver, VT_BOOL, VTS_I4 VTS_I4)
END_DISPATCH_MAP()
<input type="button" onClick="send_result('123')" />
<script text="text/javascript">
function send_result(str){
	window.external.eyeOver(0,0);
}
</script>

Interface definition file 是一个接口文件，它应该由用户利用IDL(interface definition language)语言编辑uuidgen产生的IDL原型文件而成。IDL是一种用来说明操作（过程或函数），操作的参数以及数据类型的语言，它在语法上继承于C语言，但形式上和C语言有很多不同，当然也有一些符合自己特点的适合于分布计算的特殊语法。具体可参看DCE RPC specification中的IDL language specification部分 (idl.jpg)

IDL文件可以定义C和C++风格的结构，并可用它们作为函数的参数。 当IDL文件中有一个library时，MIDL将生成一个类型库
http://www.vckbase.com/index.php/wv/1218
COM 在设计初期，就定了一个目标：要能实现跨语言的调用。既然是跨语言的，那么组件的接口描述就必须在任何语言环境中都要能够认识。怎么办？用 .h 文件描述？------ C语言程序员笑了，真方便！BASIC 程序员哭了:-( 因此，微软使用了一个新的文件格式---IDL文件（接口定义描述语言）。IDL 是一个文本文件，它的语言语法比较简单，很象C。具体 IDL 文件的讲解，见下一回《COM 组件设计与应用（八）之添加新接口》。IDL 经过编译，生成二进制的等价类型库文件 TLB 提供给其它语言来使用。图三示意了 ATL COM 程序编译的过程
idl2-ATL 组件程序编译过程.jpg
说明1：编译后，类型库以 TLB 文件形式单独存在，同时也保存在目标文件的资源中。因此，我们将来在 #import 引入类型库的时候，既可以指定 TLB 文件，也可以指定目标文件；
说明2：我们作为 C/C++ 的程序员，还算是比较幸福的。因为 IDL 编译后，特意为我们提供了 C 语言形式的接口文件。
说明3：IDL 编译后生成代理/存根源程序，有：dlldata.c、xxx_p.c、xxxps.def、xxxps.mak，我们可以用 NMAKE.EXE 再次编译来产生真正的代理/存根DLL目标文件(注1)

idl文件转换成.h文件，你可以使用midl命令生成  idl-midl-h.gif
将idl文件加入到工程项目中，然后右键属性在output中生成文件即可

boost::date_time 的时间 -> 字符串的转换
                 字符串 -> 时间的转换

		CPositionData tmp(x, y, boost::posix_time::ptime::is_not_a_date_time); 这句话是错的，为什么？ 
		CPositionData tmp(x, y, boost::posix_time::not_a_date_time); 这个是正确的

时间点构造
tmp.time = boost::posix_time::microsec_clock::local_time();
ptime d3(not_a_date_time);

时长构造
tmp.duration = tmp.time - tmp.time;  构造时间段  tmp.duration = boost::posix_time::time_duration(0, 0, 0, 0);

using namespace boost::posix_time;
time_duration td(1,2,3,4); //01:02:03.000000004 when resolution is nano seconds
time_duration td(1,2,3,4); //01:02:03.000004 when resolution is micro seconds

using namespace boost::posix_time;      
time_duration td = hours(1) + seconds(10); //01:00:01
td = hours(1) + nanoseconds(5); //01:00:00.000000005

Syntax	Description
Example
time_duration(hours,
              minutes,
              seconds,
              fractional_seconds)
Construct a duration from the counts. The fractional_second parameter is a number of units and is therefore affected by the resolution the application is compiled with (see Build-Compiler Information). If the fractional_seconds argument exceeds the limit of the compiled precision, the excess value will be "carried over" into the seconds field. See above for techniques to creating a resolution independent count.
time_duration td(1,2,3,9);
//1 hr 2 min 3 sec 9 nanoseconds
time_duration td2(1,2,3,123456789);
time_duration td3(1,2,3,1000);
// with microsecond resolution (6 digits)
// td2 => "01:04:06.456789"
// td3 => "01:02:03.001000"
// with nanosecond resolution (9 digits)
// td2 => "01:02:03.123456789"
// td3 => "01:02:03.000001000"
time_duration(special_value sv)
Special values constructor. Important note: When a time_duration is a special value, either by construction or other means, the following accessor functions will give unpredictable results:
hours(), minutes(), seconds(), ticks(), 
fractional_seconds(), total_nanoseconds(),
total_microseconds(), total_milliseconds(),
total_seconds()
The remaining accessor functions will work as expected.

std::string to_simple_string(time_duration)
To HH:MM:SS.fffffffff were fff is fractional seconds that are only included if non-zero.
10:00:01.123456789
std::string to_iso_string(time_duration)
Convert to form HHMMSS,fffffffff.
100001,123456789

time_duration td(1,2,3, 1000);
td.fractional_seconds(); // --> 1000

防止程序重新打开的类

可以确认：如果需要关闭后，重新打开同一个串口，最好的方法是，用新串口对象及新io_service对象.

	if(m_port) m_port.reset(); //在对应的服务重置前，先把旧的串口对象删除了（因为删除析构的时候，需要用到io_service）
	m_io_service.reset(new boost::asio::io_service());
	m_port.reset(new boost::asio::serial_port(*m_io_service));

		//FIX：下面这个顺序是否有问题？  不正确，这样串口仍补占用，未关闭. 先调用m_port->close()再关闭服务就可以了。
		if(m_io_service) m_io_service->stop();
		if(m_io_service_thread) m_io_service_thread->join();
		if(m_port) m_port->close();


m_io_service.reset(new boost::asio::io_service);
new boost::asio::io_service 后面需要添加括号吗？

最近需要x取及DQUSB devices的模式，用到SetupDi****相P的API，@些API都是放在setupapi.he，找了很久，在W路上也有人提到，但都是片面的，也都分散在不同的地方，F在我就⑵湔合放在我自己的Bloge，@酉麓我用也不忘。@一MAPI是Microsoft PlatformSDK提供的，路揭苍VSe

// Open a handle to the serial port.
  ::HANDLE handle = ::CreateFileA(name.c_str(),
      GENERIC_READ | GENERIC_WRITE, 0, 0,
      OPEN_EXISTING, FILE_FLAG_OVERLAPPED, 0);
  if (handle == INVALID_HANDLE_VALUE)
  {
    DWORD last_error = ::GetLastError();
    ec = boost::system::error_code(last_error,
        boost::asio::error::get_system_category());
    return ec;
  }
  
  	if(m_port) {
		m_port->stop();
		//m_port.reset();
	}
	m_service.stop();    先停止了SERVICE,再调用串口对象的关闭函数,关闭是无效的。
	if(m_comrev_thread) m_comrev_thread->join();
	
SerialPort 对象重新打开，最好的方法，是创建新的对象。同时其对应的SERVICE也需要，创建新的对象。

std::fstream  open 
语法: 
  void open( const char *filename );
  void open( const char *filename, openmode mode );

函数open()用于文件流。它打开filename 并将其与当前的流相关联。可以选择的模式有： 

模式 含义 
ios::app 添加输出 
ios::ate 当已打开时寻找到EOF 
ios::binary 以二进制模式打开文件 
ios::in 为读取打开文件 
ios::out 为写入打开文件 
ios::trunc 覆盖存在的文件 


ptime -> utc 一个整数
ptime -> string

http://www.howtogeek.com/howto/28653/debunking-myths-is-hiding-your-wireless-ssid-really-more-secure/
隐藏SSID没有意义？
netsh wlan show networks mode=bssid

inSSIDer began as a replacement for NetStumbler, a popular Windows Wi-Fi scanner, which had not been actively developed for several years and reputedly did not work with modern 64-bit operating systems or versions of Windows higher than Windows XP. The project was inspired by Charles Putney on The Code Project

最好的JSON解析器
http://stackoverflow.com/questions/245973/whats-the-best-c-json-parser
JsonCpp (http://jsoncpp.sourceforge.net/)
json_spirit::write( root, json_spirit::pretty_print );

I'm using JSON Spirit on a project at the moment, I'm impressed with it so far.
Note that it does rely on Boost (if only for headers).
Handy features:
Has Unicode support.
Uses std::vector to hold Arrays which helps interoperability.
Provides a pretty print function (write_formatted).
Has read and write functions for strings and streams.
Note that Objects are also implemented using vector (not map), which means slower access, but it does mean that the order of elements is maintained.

Boost property_tree does not fully support all type information. 
From the documentation: JSON values are mapped to nodes containing the value. 
However, all type information is lost; numbers, as well as the literals "null", "true" and "false" 
are simply mapped to their string form

Packet injection(注入)
By utilizing raw sockets, NDIS function calls, or direct access to a network adapter kernel mode driver, arbitrary packets can be constructed and injected into a computer network. These arbitrary packets can be constructed from any type of packet protocol (ICMP, TCP, UDP, and others) since there is full control over the packet header while the packet is being assembled

The basic service set (BSS) provides the basic building-block of an 802.11 wireless LAN.
Each BSS or ESS is identified by a service set identifier (SSID) - a 1 to 32 byte string

An extended service set (ESS) is a set of two or more interconnected wireless BSSs that share the same SSID (network name), 
security credentials and integrated (providing translation between 802.3 and 802.11 frames) wired local area networks that appear 
as a single BSS to the logical link control layer at any station associated with one of those BSSs 
which facilitates mobile IP and fast secure roaming applications; 
the BSSs may work on the same channel, or work on different channels to boost aggregate throughput.

boost::system::error_code 的类型判断
void SerialPort::on_receive_(const boost::system::error_code& ec, size_t bytes_transferred)
{
	try {
		//boost::mutex::scoped_lock lock( m_mutex );
		
		if( ec ) {                                          判断这个ERROR是否是，国为串已经关闭
			// 如果出错了，直接读下次的
			m_port.async_read_some( boost::asio::buffer( m_read_buf_raw, SERIAL_PORT_READ_BUF_SIZE), 
				boost::bind( &SerialPort::on_receive_, this, 
					boost::asio::placeholders::error, 
					boost::asio::placeholders::bytes_transferred ) );
			return;
		}


WinaMain 获取传递的参数
MFC也可以像控制台那样获取命令行参数：
利用GetCommandLineW()函数获得命令行参数，
利用CommandLineToArgvW()函数解析命令行参数
LPWSTR *szArglist = NULL;   
int nArgs = 0;   
szArglist = CommandLineToArgvW(GetCommandLineW(), &nArgs);   
if( NULL != szArglist)   
{   
//szArglist就是保存参数的数组   
//nArgs是数组中参数的个数   
//数组的第一个元素表示进程的path，也就是szArglist[0]，其他的元素依次是输入参数。   
}   
//取得参数后，释放CommandLineToArgvW申请的空间   
LocalFree(szArglist); 

i/o 读写的codecvt local facet
boost/program_options/detail/utf8_codecvt_facet.hpp
		static std::locale utf8Locale( std::locale( "" ), new boost::program_options::detail::utf8_codecvt_facet() );
		boost::property_tree::wptree xml;
		boost::property_tree::read_xml( wstring2string( xml_file ), xml, boost::property_tree::xml_parser::trim_whitespace, utf8Locale );
		
static std::locale utf8Locale( std::locale( "" ), new boost::program_options::detail::utf8_codecvt_facet() );
	boost::property_tree::read_xml( wstring2string( xml_path ), ptree, boost::property_tree::xml_parser::trim_whitespace, utf8Locale );
	boost::property_tree::write_xml( wstring2string( xml_path ), ptree, utf8Locale, settings );

http://msdn.microsoft.com/en-us/library/ff802693.aspx
串口通信开发文档。
Overlapped I/O operation

boost::asio::socket 异步读写时  socket关闭问题？需要同步吗？

Using the attached sample program (a slightly modified version of the daytime3 tutorial). When I connect with a telnet session to the server and close the connection directly I get the following output from the server: Transfer status: Success. Transfer status: Broken pipe. Transfer status: Broken pipe. Transfer status: Broken pipe.

After the first error I close the socket and would expect a boost::asio::error::operation_aborted error instead of the broken pipe.

Reproduced under both Debian Lenny (gcc 4.3.4) and Windows XP (MSVC 2008).
当调用close后，正在写的操作，就completed with an error as soon as the client closed the connection
The behaviour is correct. The write operations are not pending when you call close, it's just that the handlers haven't been called yet. The write operations themselves completed with an error as soon as the client closed the connection.

CloseHandle(impl.handle_) 串口，即使只有一个线程，也会死在句。退不出来。USB2PORT
I agree with both previous posts.

This is a bug in the driver for FTDI chipset under Windows XP.
The native method CloseHandle() never returns, when the port handle is closed.

https://connect.microsoft.com/VisualStudio/feedback/details/202137/serialport-close-hangs-the-application

This is not a normal situation.
Unplugging the USB device usually helps.
This problem is related to the glitches in the FTDI driver, which is responsible for implementing a virtual COM port. On the other hand those "glitches" are related to various malfunctions of the USB devices. (Of course this doesn't justify the FTDI driver).

BTW there're several other known problems with some FTDI drivers:

Sometimes call to CloseHandle just hangs the calling thread.
Sometimes also the application is still "visible" in the task manager, even after it's closed. Task manager can't terminate the application, and the debugger can't be attached to it. Its EXE file is locked (can't be erased).
Usually unplugging the USB device immediately helps in those situations. The FTDI driver, which seems to be "waiting for something" awakes.

一个boost::asio::socket, 在不同的线程，写，不加互斥，是不安全的。
The only way to protect you from hitting this case is to build your program to avoid situations like this.

One way to do that is by writing an application layer send buffer 
which a single thread is responsible for pushing onto the socket. 
That way you could protect the send buffer itself only. 
Keep in mind though that a simple std::vector won't work, 
since adding bytes to the end may end up re-allocating it, 
possibly while there is an outstanding async_write_some() referencing it. 
Instead, it's probably a good idea to use a linked list of buffers, a
nd make use of the scatter/gather feature of asio.

write and async_write are not thread safe in the manner you are using them. 
The canonical way to approach this is to queue your messages, then write them out one at a time.

Tip::tcp::socket  hread Safety
Distinct objects: Safe.
Shared objects: Unsafe.

boost::socket对象在工作线程中同步读写的情况，在另一线程里关闭？没有常规的办法。
Thread-safely closing a boost::asio::ip::tcp::socket being used synchronously
异步读写的情况下，可以先cancel
If your acceptor is in async_accept, you can call ip::tcp::acceptor::cancel() to cancel any async operations on it. 
试验结果，虽然cancel了，还是会接收到数据（m_serial_port.cancel  m_serial_port.close 那个会再引导异步I/O操作？）

Cancel is useful if you want to stop pending operations without closing down the socket.
Note that the Boost documentation recommends using close for greater portability (from doc page):
... For portable cancellation, consider using one of the following alternatives:
Disable asio's I/O completion port backend by defining BOOST_ASIO_DISABLE_IOCP.
Use the close() function to simultaneously cancel the outstanding operations and close the socket.

Note however the remarks for cancel() also state When running on Windows Vista, Windows Server 2008, and later, the CancelIoEx function is always used. 
This function does not have the problems described above. 
C  Sam Miller Jun 22 '11 at 15:33 
thank you and Sam Miller for help,i understand a little now,thank you

cancel won't close the socket, so use cancel if you intend to continue using the socket object. In particular, if you have code in asynchronous handler methods that references the socket's member functions, you may not want to close the socket until you are guaranteed that your currently executing asynchronous handlers have completed.

cancel doesn't guarantee anything about currently executing asynchronous handlers, it only guarantees (per the boost documentation) that "This function causes all outstanding asynchronous connect, send and receive operations to finish immediately" in the case of the socket::cancel() call, or "This function forces the completion of any pending asynchronous operations on the host resolver" in the case of the resolver::cancel() call. This "completion" means that boost will call your asynchronous handler method, it has no jurisdiction to inject any cancellation logic into your asynchronous handler (not to mention it doesn't know about the handler's implementation to begin with).

I would suggest adding your own logic into your asynchronous handler method to handle the case where the socket/resolver/etc. is canceled. If you are calling the cancel method, then you likely have the ability to communicate this cancellation to the asynchronous handler method.

basic_serial_port::close (1 of 2 overloads)

Close the serial port.

void close();  根据下面的解释，Close前没有必要调用cancel
This function is used to close the serial port. Any asynchronous read or write operations will be cancelled immediately, and will complete with the boost::asio::error::operation_aborted error.

更改编辑框的字体
CWindow::SetFont
Changes the window's current font by sending a WM_SETFONT message to the window.

由StockObject font 创建一个CFont  m_Font.Attach(GetStockObject(DEFAULT_GUI_FONT)); 
stock font size 
CFont *m_pFont = new CFont;
m_pFont->CreateFont(...);
myEdit->SetFont(m_pFont);

GetDlgItem(IDC_EDIT1)->SetFont(&m_editFont);

void makebold(HWND hwnd)
{
	HFONT hFontB,hFont = (HFONT)SendMessage(hwnd,WM_GETFONT,0,0);
	LOGFONT lf;
	GetObject(hFont, sizeof(LOGFONT), &lf);
	lf.lfWeight = FW_BOLD;
	hFontB = CreateFontIndirect(&lf);
	SendMessage(hwnd,WM_SETFONT,(int)hFontB,1);
}

To change the font: WM_SETFONT.
To change the back color: WM_CTLCOLOREDIT.

CComboBox:: 添加在后面
m_serial_port_cbox.AddString(L"COM1");
m_serial_port_cbox.AddString(L"COM2");
m_serial_port_cbox.AddString(L"COM3");
m_serial_port_cbox.AddString(L"COM4");
m_serial_port_cbox.AddString(L"COM5");
m_serial_port_cbox.AddString(L"COM6");
m_serial_port_cbox.AddString(L"COM7");
CComboBox:: 获取当前编辑框的文本
	CString cur_port;
	m_serial_port_cbox.GetWindowText(cur_port);


 2012-07-12 14:41:58
没有内射，莫名其妙中枪，5月28号末次月经，7月5号才觉得事情不对，一查果然中标，花了一个周末的时间研究好了各种方案和注意事项，7月9号和11号在上海国际和平妇幼保健医院做了药流，提供全过程拱有需要的JMS参考。 

9号周一早上8点钟赶到医院，已经人山人海，要不是提前和医生打好招呼，不知道要等到什么时候。所以，TIPS1：国妇幼7点半可以开始挂号，介于早上需要检查很多项目，建议7点半前赶到。由于提前和医生打了招呼，挂好号就直奔计划生育科门诊，医生简单手诊，用窥阴器看了看宫颈，取了白带和刮片，开了彩超单，肇事者拿着去交钱了，这里，TIPS2：一定要带个人去，交钱什么的方便，拿着自己的白带样本排队交钱很傻的。然后我去B1楼等待阴超，我前面已经100多号人了，所以一定要早到。阴超主要是观察是否宫内孕和孕囊大小，我42天，已经有14*12*11mm，一切正常，回到医生那里，医生让我选药流还是人流，果断选择药流，90%的成功率，像我体质还不错平时注意保养的人应该不至于掉到那10%里去。又让去排队抽血，抽血后要45分钟才能看结果。等看好结果，导医台的护士给了0.25mg*6的米非司酮片，开始交代注意事项，并且让我吃了两片。第二片晚上10点半吃，因为要间隔12小时，第二天早上9点吃了两片，晚上9点吃了一片，吃米非司酮这两天和吃药前没什么差别，就是恶心感觉强烈了一些，TIPS3：在家吃药两天，吃清淡好消化好吸收的。吃必胜客披萨第二天晚上吐了。其他一切正常。 

11号要求早上8点钟到四楼手术室吃米索前列醇，到了一看，做人流的把等候区坐满了，药流的只有我一个，药流室有舒服的大沙发，有电视，比隔壁人流手术室温馨多了。8点半整吃好药，闭目养神。8点45开始有腹坠的感觉，持续到9点开始剧痛，痛到站不起来也坐不住，蹲在洗手间缩成一团，冷汗直流，下腹部像是被从内部大力揉捏，同时开始流血。想起来看别人的分享，说和痛经差不多，我只想说如果每个月都要让我这么痛一次，我早就自尽了。胃部也开始痉挛，嘴里泛酸，马上要吐了，赶紧深呼吸一口尽量忍住没吐。这个时候什么瑜伽呼吸法什么自我暗示法统统抵挡不住剧痛。还好剧痛持续了也就一刻钟，开始渐渐退减为痛经时的痛，等我从洗手间慢慢挪回沙发上，刚好是9点15分，刚过去的剧痛让我极为疲倦，听着音乐睡着了。 

我旁边的大姐9点吃药，11点排好了绒毛。我一直出血极少，也没有要排的感觉，医生让多喝点热水，多走动走动，喝了两大杯热水，从药流室散步到人流手术室又散步回来，去换卫生巾的时候感觉到哗啦一下泄闸了，出了好多血丝，还有一块第一指节大小的组织，肉粉色，有点像成块的鱼籽。孕囊排下来了，1点05分，医生看了说可以了，再观察下出血可以回家了。TIPS4：一定要多喝水多活动，有助于排出胚胎。我一直拿着热水杯捂在小腹上，很舒服，建议可以带个暖宝宝，也应该有辅助的效果。 

医生给开了鲜益母草胶囊和妇科千金片，嘱咐一个月不要同房，注意休息，不吃辛辣勤换卫生巾等等就放我走了，出门时候看到还有几十个人在人流手术室门口排队，为什么做人流的要比药流的少很多呢，不懂了。 

回家开始大出血，血量差不多2小时湿透一片日用，血色鲜艳，有点吓到我了。 
煮了鲫鱼豆腐汤，打算休息几天，喝点鸽子汤，鸡汤，豆浆，小米粥，空调设定28度，觉得有风就用毯子把自己包起来，等着去复查了。 

今天是药流后第二天，出血好过昨天，差不多正常月经的量了。腹部还是有轻微的坠胀感。


全部费用如下： 
9号： 
挂号：15.5 
阴超：50 
分泌物检查：7 
白带还是什么不记得了检查：40 
抽血：20 
药流费：220 
11号： 
挂号：15.5 
鲜益母草3盒：198 
外用洗液1瓶：65 
妇科千金片：83 

国妇幼的医生和护士态度都不错，效率也挺高。 
期间查了很多资料以及专业论文，愿意和有需要的jms分享。 
========================================================== 

12日： 
在家休息一天，早餐红糖大枣米酒煮鸡蛋，午餐鲫鱼豆腐汤，蔬菜沙拉，披萨 
从下午开始下腹部持续痛，痛过日常痛经，血量大过月经，咨询了朋友，说正常，还需要持续2-3天，晚上10点半左右排出带血块的膜状组织一块。 


============================================================= 

13日： 
早上红糖大枣米酒炖蛋，中午黑鱼豆腐汤，素炒西兰花，黑木耳肉片 
腹痛好了些，和日常月经感受差不多，出血量也相当于日常月经，坚持每小时换卫生巾。继续排出小块的子宫内膜组织 


============================================================== 

14日： 
早上睡过了，没吃早餐，午餐，当归淮山鸽子汤，生菜沙拉， 
腹痛基本上消失了，还在陆续排出小块的内膜组织和血块，量进一步减少。 
============================================================ 
15日： 
早上红枣米酒炖蛋，中午皮蛋瘦肉粥，晚上当归山药母鸡汤 
基本不出血了，只极少量的血污~恢复的还不错 
============================================================= 
16日： 
早上红枣米酒炖蛋，中午当归老母鸡汤面 
居然排出了褐色的泥浆状的东西，其他没有任何不良反应，甚至我又开始想活蹦乱跳了。
============================================================== 
17日： 
不出血了，护垫上干干净净，这事可以告一段落了，一周后再去复查，停止更新 
============================================================== 











1.哪些人适合药流？                    

  ⑴.确诊为正常宫内妊娠； 

  ⑵.停经天数小于49天（从上次月经第一天算起）； 

  ⑶.年龄小于40岁； 

  ⑷.手术人流高危对象：如生殖道畸形、严重骨盆畸形、宫颈发育不全、剖腹产半年内、产

后哺乳期、多次人流或刮宫史； 

  ⑸.对手术流产有恐惧心理者； 
--------------------------------------------------------------------------------
2. 哪些人不适合打胎药药流？ 

  ⑴. 患有对药流药物有禁忌的疾病：如肾上腺疾病、糖尿病、肝肾功能异常、血液病、血管

拴塞病史、高血压、心脏病、青光眼、癫痫、哮喘等； 

  ⑵. 宫外孕或可疑宫外孕； 

  ⑶. 过敏体质或对本药过敏者； 

  ⑷. 带环妊娠； 

  ⑸ .长期服用利福平、雷米封、抗癫痫药、抗忧郁药、西咪替丁、阿斯匹林、消炎痛、

巴比妥类等；

  ⑹. 吸烟超过10支/日或嗜酒； （国外有报道吸烟妇女作药流时不幸死亡）

  ⑺. 不能及时就诊随访者； 

  ⑻. 胎囊平均直径大于2.5cm者；
  
  (9).阴道炎，重度宫颈糜烂，盆腔炎等没有治愈者。
-----------------------------------------------------------------------------------

3. 打胎药流产的优点有哪些？ 

   ⑴. 使用方法简单； 

   ⑵ .应用安全，无手术流产的宫腔内操作； 

   (3).没有对手术清宫的恐惧心理。 
------------------------------------------------------------------------------------


4.打胎药药流前需要做那些检查？  
  ⑴.一般体格检查，如血压、心、肝、肾等； 

  ⑵.妇科检查； 

  ⑶血常规、阴道清洁度、霉菌、滴虫检查、尿妊娠试验、必要时血β-HCG测定； 

  ⑷妇科B超检查； 
-------------------------------------------------------------------------------------

5.口服打胎药 药物流产的详细流程：

  (1).前期准备：

  进行阴道药物灌洗，主要是对阴道内一些杂菌进行杀灭。

  (2).打胎药服药方法：

  先服用米非斯酮：

  早上吃两粒，晚上吃一粒，连吃两天。

  或早晨吃一粒米非司酮，晚上吃一粒米非司酮，连吃三天。

  吃完米非司酮的次日上午，到有条件做流产的医院门诊吃三粒米索前列醇。

  两种药都是空腹吃，吃药两个小时后再吃饭，如果服药2小时内有呕吐现象，需要补服。

   在服米非司酮期间个别女性会出现阴道少量出血，极个别女性也会在这个时期排出孕囊。所以服米非司酮后，少量流血是正常的，

如果有大出血需要到医院就诊。每次大小便都要用盆接着，注意观察排出物，孕囊为球形体,在水中清洗后为粉白色,

外有漂浮的绒毛,在水中清洗后易破碎,见图片。蜕膜无完整球形及绒毛,要仔细观察服药者排出的孕囊与蜕膜区别。

    在吃米非司酮期间可以有出血，也可以没有出血，不管出血不出血，排出胎囊或暂时没有排出胎囊，两种打胎药都要继续吃完。

流产

   于服完米非司酮的次日早，服用与米非司酮协同流产的药物米素前列醇片3粒 每粒0，2mg，共计0，6mg。

   服药后20分钟后或你觉得腹痛时需要来回走动，轻轻揉下腹部，则利于子宫收缩和孕囊排出。如果你有便意，

到洗手间时一定要用盆接好排下的大小便，80%的人6小时内就会排出孕囊了。


服药后，部分早孕女性会出现轻度恶心、呕吐、眩晕、乏力和下腹痛。极个别女性会出现潮红、发热及手掌瘙痒。

  (4).观察

   服药后约80%的女性在服用后6小时内排出绒毛胎囊，如果到第6个小时时未见胎囊排出来，

可以再吃三粒米索前列醇。约10%的女性在服药一周内排出妊娠物。 服药后15-20天应到医院做复查，以确定胚胎组织是否完全流出。

----------------------------------------------------------------------------------------------------------------

5. 服打胎药后应注意那些？ 

  ⑴.服打胎药前后必须空腹2小时，必须按时服药，不能漏服，服药后不足2小时呕吐应补服，

不能同服甾体类抗炎药如阿司匹林，消炎痛、水杨酸类、镇静剂等； 

  ⑵.可能有恶心、呕吐、腹痛、腹泻、头晕、手心骚痒等，一般可观察，不必特殊处理； 

  ⑶.阴道出血后应使用专用便器接大小便，如有组织排出，应及时送医院检查鉴别； 

  (4).如有持续剧烈腹痛、发高烧、大量阴道出血应及时就诊； 

  (5).突然严重头晕，心慌，眼发黑，视物模糊应立即看医生,这可能是严重过敏的反映。

-----------------------------------------------------------------------------------------------------------------

6. 何种情况下可以离院？ 

   ⑴.胎囊顺利排出，观察1小时后，可以回家，2周后复诊； 

   ⑵.胎囊6小时未排出，可以回家，一周后复诊；

------------------------------------------------------------------------------------------------------------------

7.药物流产后出血过多，主要原因有：

1，残余或胎囊组织卡在了子宫颈，影响了宫颈与子宫的收缩，引起大出血，出血或很猛，很多，不停地流血。 

处理：尽快用器械将残余或胎囊取出。

2，术前没有检查血常规，可能是血液病引起大出血或出血不止。

处理：尽快检测血常规加血小板。

一般宫内少量残余，不会造成大出血。会淋漓不断地少量出血。

-----------------------------------------------------------------------------------------------------------------

 8.吃打胎药流产后注意事项 

  (1)排出胎囊后，可以吃点宫血宁与益母草；  
  (2) 6天后，如果仍在出血可吃点消炎药；6天后不出血了，消炎药就不再吃了，6天前千万不可以吃消炎药。如果现在就吃消炎药，那么一旦

出血时间长，再吃消炎药，那就吃的时间太长了，对身体不好，容易引起霉菌感染。现在出血，就是月经样，平时月经不是也不吃消炎药吗？ 
  (3) 注意卫生，一个月内绝对不要有性生活，不要盆浴，否则，后果不堪设想； 
  (4) 不要受凉，不要吃辣椒；不吃生冷食品； 
  (5) 多吃肉蛋，豆制品，红枣，黑木耳，新鲜水果蔬菜； 
  (6) 不要劳累，休息两周； 
  (7) 排出胎囊15-20天时到医院复查。

------------------------------------------------------------------------------------------------------------------
   
9.吃打胎药药流能流干净吗？ 

    流不干净的情况非常少见，有些人说药流没流干净，又做了清宫，极少数人是应该做清宫术，但是绝大部分人是不该做的，主要是医生的

水平有限，或者说没经验，比如说，做药流是80%在吃完米索前列醇后6小时内胎囊排出，10%是在一周内排出，10%无效。实际工作中，有些医

生将6小时内没排除就定为药流失败，就给轻易的做清宫，他就不知道还有10%是在一周内排出。再有，即使流产流干净了，少量的出血可持续

14-18天，在B超下看到的也是残留物，这些残留物是由瘀血和蜕膜碎片组成，在流产后逐渐排出，有些医生将正常时间内正在逐渐排出的残留

或出血就误认为是没流干净，而过早地给做清宫了，这就给患者造成了不必要的再痛苦。因此在选择做药流时，一定要到正规大医院！再者，

药流(从吃完米索排出胎囊后计算)15-20天后再复查，如妊娠试验阴性了，也不再出血了，流产就算干净了，如果测试妊娠是阳性或还在出血，

则可能没流产干净，这时须再做B超检查，如果确实显示没有流产干净，又经过保守治疗而不成功者，这时再做清宫处理。 
----------------------------------------------------------------------------------------------------------------
10. 打胎药药流后没有看到胎囊排出怎么办？ 
    
    按要求，流产药吃过并开始阴道出血时，上卫生间时应该用盆子接住出血，并进行观察有否胎囊排出，但有的患者有时疏忽，没有用盆接

住出血，导致出血后不知道胎囊是否已经排出，这时可以根据以下情况进行判断。 
   (1). 如果服米索前列醇后的几小时内出血多，而现在出血在逐渐减少，就说明胎囊已经排下来了，只是在当时你没有看到，是白色的，像

自己的手指甲盖大小或鸽子蛋大小，有时会包在血块内，不用水洗血块就看不到，如果胎囊没有出来，出血就不会减少，而且会越出越多。一

般4--6小时排出胚胎组织。一般在排出血块后，腹痛逐步停止，出血量大为减少。但是否完全排出，需要进行鉴别。 排除完整的胚胎组织，才

是流产成功。对于流出的血块进行鉴定，是非常重要的一环。方法是将经血放于一器皿中，加水轻轻冲洗，血块消散后，如果看到一个小水囊

，有时可见其中含有一略似虾米的东西，即胚胎。然后要找到绒毛，绒毛附着在胚囊表面，在水里漂洗后，呈现一种白色毛绒绒的状态。如果

看到这团绒毛，可进一步证实是胚胎，说明胚胎已排出，流产完全。 如果排出的仅仅是血块，或一些扁平的组织，经使用上述方法鉴别，没有

发现胚胎与绒毛，而且腹痛仍然很重，出血仍然很多，那就没排出来胎囊组织，这时，可再吃3粒米索前列醇或同时再注射一支缩宫素，有利于

宫颈扩张与子宫收缩，从而将胎囊排出来。同时也可吃宫血宁，一次吃两粒，每6小时吃一次，连吃7天。此药可消炎，可止血，可帮助子宫收

缩，将残余的组织排出，效果比较好。也可吃益母草膏或益母草冲剂。15－20天后再复查，阴性就干净了，阳性就没有干净，再清宫。经过这

样的处理，绝大部分都是会流产成功的。 
   (2) 如果服米所前列醇后的几小时后，出血很少或没有出血，那就是胎囊没有排出来，可再吃3粒米索前列醇或同时再注射一支缩宫素，如

果6小时后还是没有看到胎囊出来，那就再观察几天，因为有10%的人可在一周内排出来。如果一周后仍然没有排出来胎囊，就要到医院看医生

，做下一步处理了，或再吃一次打胎药，或清宫。 
------------------------------------------------------------------------------------------------------------------
11.药流后出血淋漓不断怎么办？

   药物流产过程中如果见到胎囊（白色的、像自己大拇指的手指甲盖大小、毛绒状）排出，就可以认为药流堕胎基本完成。但是，由于附着在

子宫内壁上的蜕膜还没有完全随胎囊排出，因此子宫的收缩受到影响，出血不会马上停止，尤其是流产后的头三天出血比较多，以后会逐渐减

少，部分人7天内可以出血停止。一般地，药物流产胎囊排出后的少量出血天数平均为18天，个别出血时间会长一些，引起出血时间长的原因可

能是： 
  (1).蜕膜剥脱不完全，影响子宫收缩止血；或是胎囊排出不完整，导致不全流产；影响蜕膜剥脱不完全的主要原因是子宫内膜原来有炎症，

使蜕膜与子宫壁粘合在一起，导致剥脱困难，影响子宫收缩止血，引起出血时间延长。因此，在药物流产前，一定要到正规医院检查，凡有子

宫内膜炎者、阴道炎者，在未治愈前，不宜做药物流产。

  (2).子宫收缩乏力及子宫位置因个体差异使常规剂量的前列腺素类药物引起的宫缩不能将绒毛及蜕膜全部排除，则活性绒毛滋养叶细胞是导

致出血的主要原因。药物流产排出胎囊后两周仍有月经量的出血亦与子宫过度屈曲有关,有资料显示，在刮宫中发现子宫过度屈曲致蜕膜碎片排

出不畅。

  (3).与前次妊娠的关系  有资料分析发现，首次妊娠药流成功率高，而有分娩史、负压吸宫史或药物流产史，可能是子宫内膜受过创伤，此

次妊娠蜕膜生长不良，致妊娠组织粘连，增加不全流产的机会。

  (4).米非司酮与孕酮受体结合后抑制孕酮对子宫的正常生物效能，此时体内缺乏孕激素影响，子宫内膜的分化及螺旋血管发育不良，引起出

血持续时间长且量多。

  (5).少数病人出血时间长是为药物流产术后感染，出现子宫内膜炎症所引起。所以，流产后一定要注意阴部卫生，不要冲洗阴道内部，可以

用温热水冲洗外阴；勤换卫生巾或护垫；一个月内绝对不可以有性生活。

   出血淋漓不断处理方法： 
   (1).口服宫血宁胶囊，一次服两粒，每6小时服一次，服至见到蜕膜或部分胎囊排出，出血基本停止。宫血宁可有消炎、止痛、止血之功效

，更重的是可以帮助子宫收缩，将残余蜕膜组织或残余胎囊排出子宫外。经临床验证疗效很好。在吃宫血宁期间，如突然感到小腹疼痛或坠痛

，或出血增多，就要注意观察，很有可能残余组织就要被排出来了。有较重胃肠疾患者不可以服宫血宁。 
  (2).不能服宫血宁者，可以口服益母草。糖尿病者不宜服用。 
益母草冲剂，开水冲服，每次15克，每8小时一次， 
益母草片，口服：每次4片 ，每8小时次。 
益母草口服液，每次2支，每8小时一次。 
  (3).在医生的指导下也可以肌注催产素促进子宫收缩，以排出剩余的蜕膜组织。一天一支，可以连用3－5支。 
  (4).适当应用消炎药。如阿莫西林、氧氟沙星、罗红霉素等。 
阿莫西林：一次0，5克，每8小时吃一次，可吃7天。对青霉素过敏者不能用。 
氧氟沙星：一次100毫克，一天两次。可以吃7天。对此药过敏者不可以用。 
以上消炎药吃任意一种既可以。  
  (5). 如果点滴出血超过20天，就要复查B超，测试妊娠试验，而后根据情况再做处理。

------------------------------------------------------------------------------------------------------------------

12.吃打胎药流产后何时做B超为好？

    在流产后15内做B超，往往看到的图象都是有残余，没有意义，因为少量蜕膜组织要在两周内逐渐排出干净，有出血时，子宫内就有淤血，

这时做B超，显示得就是残余蜕膜与淤血的图象。如果有大残余，就会出血很多，如果出血很少了，就说明基本流产成功了，这时不要急于清宫

，通过吃药，就有可能会排出干净残余蜕膜与淤血。流产后可以吃点宫血宁或宫太妇月康胶囊或益母草颗粒等活血去淤的药物，这些药有助于

清除残余。出血时间长，容易引起感染，可再吃点消炎药，如氧氟沙星胶囊或罗红霉素等。 
在流产后15内做B超，往往看到的图象都是有残余，没有意义，因为少量蜕膜组织要在两周内逐渐排出干净，有出血时，子宫内就有淤血，这时

做B超，显示得就是残余蜕膜与淤血的图象。如果有大残余，就会出血很多，如果出血很少了，就说明基本流产成功了，这时不要急于清宫，通

过吃药，就有可能会排出干净残余蜕膜与淤血。流产后可以吃点宫血宁或宫太妇月康胶囊或益母草颗粒等活血去淤的药物，这些药有助于清除

残余。出血时间长，容易引起感染，可再吃点消炎药，如氧氟沙星胶囊或罗红霉素等。

    现在可以吃宫血宁，益母草，消炎药，到流产第20天时再说，如果还是在出血，就是有残余存在，再做B超，如证实还有残余，再进行吃药

排残余处理。

-----------------------------------------------------------------------------------------------------------------
     
13.药流后是否成功B超判断标准: 
    
   (1)完全流产:声像图显示, 子宫大小正常、轮廓线清晰、子宫肌层回声光点均匀、宫内膜线清晰、宫腔内无妊娠囊及不均匀回声反射, 临床

证实胚胎组织完整排出者;   
   (2)不全流产:声像图显示子宫稍大或正常, 残余部宫腔分离、内膜线消失或模糊, 宫腔内有较强点、片或线状回声;或梭形、团状强回声反

射位于宫腔或宫颈内口附近;或强光团内见不完整的妊娠囊,彩超有时可见血流信号，说明胎囊或残余是与子宫壁粘连在一起，是活体残余；不

见血流信号，残余就是已经脱离子宫壁，只是残余血块，或是残血与脱落的蜕膜组织的混合残余块，孤立存在与子宫腔。 临床上胚胎有的已排

出, 有的未见排出。  
   (3)流产失败:B超显示宫腔内有妊娠囊, 或继续发育或停滞发育。

-------------------------------------------------------------------------------------------------------------------
14.排除残余的保守处理方法是：

   吃药治疗残余,绝大部分人会有效果,但也不是100%有效,因为有人子宫内膜原来有过炎症,导致残余与子宫壁粘连很紧,有时吃药排出残余也

会失败.要不要吃药治疗残余,自己决定,我们只是建议.

   (1)在医生指导下,可以再吃一次米非司酮.再吃米非司酮后，可能会排出残余。残余存在的原因，一可能是子宫以前有炎症，致使蜕膜与子

宫壁粘连比较紧，所以排出来困难，二是当时米非司酮用量相对不足，没有使蜕膜完全变性坏死，致使极少量蜕膜没有排出来。这时再吃米非

司酮，有可能就会使残余坏死脱落出来。再吃一次米非司酮，没有大的副作用，此药比较安全。

   (2).吃避孕药排出残余.避孕药中的雌激素与孕激素可以使内膜迅速增厚，达到止血目的，可以预防贫血发生，也可以防止感染发生；停吃

避孕药后，由于雌孕激素突然消退，使内膜下的血管痉挛、导致内膜缺血、变性及坏死，增厚的内膜就会脱落，内膜脱落就会发生撤退性出血

，也算药物性月经，此时，如果有残余组织，残余组织也会随增厚的内膜一起脱落，并排出体外，这也算药物清宫。这样的药物清宫，比人用

器械清宫痛苦小，对子宫内膜损伤也小，也避免了器械清宫带来的感染机会。 
     
   A.吃短效避孕药治疗，一次吃两粒，一天吃一次，连续吃10天，停药5天左右来月经。如果有残余，就会随月经血排出来。 
     
   在吃避孕药的同时，再吃点宫血宁与消炎药，吃避孕药后不再出血了，宫血宁或消炎药就不再吃了。 
  
   短效避孕药可以吃多日纳或21+7或妈富隆，或达英35等任何短效避孕药。  

   B.长效避孕药一般先吃一粒，5天后再吃第二粒，吃过第二粒避孕药后，过6-12天，就会有撤退性出血，也算药物月经，如果有残余，就会

随出血排出来。 
     
   长效避孕药可以吃悦可婷或五月安或悦月安或三月安等任何长效避孕药。

   吃长效避孕药有些缺点：

   一是药物反应比较大，主要是恶心呕吐，头痛头晕，心慌意乱，如果有此副作用发生，可以吃点胃复安片；

   二是停吃长效避孕药后，有些人会引起月经紊乱,如少数人会发生点滴不规则出血;或月经推迟1-3个月才会来，如果发生了此情况 ，也不用

担心，不规则出血可以吃点宫血宁或吃妇血康胶囊,同时吃点维生素Ｃ片;对于暂时闭经,可以不用理她，到时自然会来。 停经期间如有性生活

，请用避孕套避孕，不要吃药，也不能用黄体酮催经治疗，越吃黄体酮或再吃避孕药，月经越就越不容易来。不干涉她，自己到时就会来了。

   建议:吃避孕治疗残余时,应该首选吃短效避孕药,短效避孕副作用最轻,确实买不到短效避孕时,再吃长效避孕药. 
   流产后期阴道为何排出一些微黄色液体？

    流产后不流血了 可能有些微黄色的东西流出来，大家不用害怕，这是流产后恢复过程中的正常液体，临床上叫恶露，过几天就会转成白色

白带，表示流产已经干净了，快要完全正常了。 
------------------------------------------------------------------------------------------------------------------
15. 药流后怎样避免感染 

　　由于药物流产中绝大多数病人不需要进行清宫术，因此盆腔感染的机会要比行人工流产手术者少。但并不是说药物流产就不会发生宫腔感

染。如果药物流产后患者在生活中不加以注意，对药物流产后的注意事项不予以重视，同样有可能患盆腔炎症。预防流产后感染，须做到：  
  (1).禁止性生活：有的人药物流产后出血时间很长，有的人却很短，也有的人出血时有时无。无论哪种情况，在未行经之前都禁止性生活。

因为药物流产时宫颈口处于松驰状态，阻止细菌进入宫腔的作用减弱。性生活时，男性包皮中潜藏的细菌及女性外阴、阴道、宫颈中的细菌可

以乘机上行感染宫腔；同时，胚胎组织剥脱后血窦开放，易于被细菌感染。 

  (2).药物流产后一个月内不盆浴，不做阴道冲洗，禁止游泳。 

  (3).所用卫生巾、卫生纸要选用合格产品；卫生巾要勤换；不穿化纤面料的内裤；内裤每日换洗。 

  (4).阴道出血超过 7 天时应在医生指导下服用抗生素预防感染。 

  (5).凡因药物流产失败或不全流产、大出血而行清宫术者，术后必须服用抗生素。 

  (6).药物流产后也要注意休息，避免劳累，避免受凉。可服用益母草膏或宫血宁等活血化瘀药物以促进子宫收缩，排出胚胎组织，减少阴道

出血量，缩短出血时间。 

  (7).注意饮食调补。多食优质蛋白、黑木耳、红枣等以增强体质，但不要过食油腻，以防滋腻碍胃。  
------------------------------------------------------------------------------------------------------------------
16流产后如何观察恶露？

    恶露是流产后或分娩后，在恢复过程中，从阴道排出的液体，简单地说，恶露是子宫内膜剥落所致，由子宫内的残血、白血球、粘液和组

织等混合而成的分泌物，经阴道脱落排出。 
     
　观察一下你的恶露情况是否正常。有些恶露属于异常情况，应当引起注意 
　 
　产后，随着子宫内膜(特别是胎盘附着地方的内膜)脱落，子宫分泌的黏液等也随之从阴道内流出，这就是恶露。正常的恶露有些血腥味，但

是不臭，总量大约为500～1 000毫升。一般情况下，恶露大约在产后3周左右就干净了。

　产后第一周，恶露的量较多，颜色鲜红，含有大量的血液、小血块和坏死的蜕膜组织，称为红色恶露。

　1周以后至半个月内，恶露中的血液量减少，较多的是坏死的蜕膜、宫颈黏液、阴道分泌物及细菌，使得恶露变为浅红色的浆液，此时的恶露

称为浆性恶露。

　半个月以后至3周以内，恶露中不再含有血液了，但含大量白细胞、退化蜕膜、表皮细胞和细菌，使恶露变得黏稠，色泽较白，所以称为白色

恶露。白色恶露可持续两三周。

　观察一下你的恶露情况是否正常，尤其是要注意恶露的质与量、颜色与气味的变化，可以估计子宫恢复的快慢，有无异常。

　有些恶露属于异常情况，应当引起注意：

　1、如果产后2周，恶露仍然为血性，量多，伴有恶臭味，有时排出烂肉样的东西，或者胎膜样物，子宫复旧很差，这时应考虑子宫内可能残

留有胎盘或胎膜，随时有可能出现大出血，应立即去医院诊治。

　2、产后发生产褥感染时，会引起子宫内膜炎或子宫肌炎。这时，产妇有发热、下腹疼痛、恶露增多并有臭味等症状。这时的恶露，不仅有臭

味，而且颜色也不是正常的血性或浆液性，而呈混浊、污秽的土褐色。

　所以，你要学会观察自己的恶露情况，发现其中有问题时，就要早些与医生联系解决。 
 ------------------------------------------------------------------------------------------------------------------ 
  
17. 药流后的自我保健 

　  流产是女人不愿面对的事情，却又往往是不得不面对的现实，几乎每个女人都会在育龄期有过至少一次流产经历。既然不得不做，你就应

该更好地保护自己，因为它毕竟是对你身体的伤害。 　　 
　 1.注意休息，加强营养。流产术后应卧床休息2~3天，以后可下床活动，逐渐增加活动时间。在流产后半月内不要从事重体力劳动和下冷水

劳动，避免受寒。注意增加营养，增强机体对疾病的抵抗力，促进受损器官的早日修复。人流术后，应多吃些鱼类、肉类、蛋类、豆类制品等

蛋白质丰富的食物和富含维生素的新鲜蔬菜，以加快身体的康复。 　　 
　 2.保持外阴清洁，严禁性交。人流术后子宫口还没有完全闭合，子宫内膜也有一个修复的过程。在这段时间内，要特别注意保持外阴部的清

洁卫生，所用的卫生巾等用品和内裤要勤洗勤换，术后半月内不要坐浴，以免脏水进入阴道，引起感染。人流术后若过早性交，易造成急性子

宫内膜炎、盆腔炎，还可继发不孕。因此，人流术后一月内严禁房事。 　　 
　　3.观察出血情况。药流术后阴道流血超过一周以上，甚至伴有下腹痛、发热、白带混浊有臭味等异常表现，就应及时到医院复查诊治。 　

　 
　　4.坚持做好避孕。人流术后卵巢和子宫功能逐渐恢复，卵巢按期徘卵。如果不坚持做好避孕．很快又会怀孕。因此，人流术后，应及早选

择可靠的避孕措施，人流手术只能作为避孕失败后不得已而采取的一种补救手术，必须坚持以避孕为主，不能把人流手术当作避孕节育的措施

。

------------------------------------------------------------------------------------------------------------------
18.流产后初次恢复的月经为何有时不太正常？

    药物流产后初次恢复的月经，往往不太正常，不是出血量少就是出血量多，要不就是出血时间长一些，主要是流产时，使内分泌系统受到

了冲击，流产后内分泌还没有及时恢复正常，再就是，有个别人流产期间，子宫内膜受到了感染，致使内膜脱落的不够均匀一致，所以出血不

是多就是少或出血时间比较长。如果出血过多，就吃点宫血宁，或注射一支缩宫素；如果出血太少，就吃点益母草或当归片。也可以吃点乌鸡

白风丸调理一下。以后会逐渐恢复正常得。　 
------------------------------------------------------------------------------------------------------------------
19. 妊娠诊断HCG测定法

   血液测定 
   测定β－HCG放射免疫法：正常人<3.1IU/L，灵敏度为5～10IU/L。 
------------------------------------------------------------------------------------------------------------------
20.妊娠时间与HCG含量对应表：

   妊娠周数 &n bsp; HCG（IU/L）  
   0.2-1 & nbsp; & nbsp; 5-50  
   1-2 &nb sp; &nb sp; 50-500  
   2-3 &nb sp; &nb sp; 100-5000  
   3-4 &nb sp; &nb sp; 500-10000  
   4-5 &nb sp; &nb sp; 1000-50000  
   5-6 &nb sp; &nb sp; 10000-100000  
   6-, 8 &nb sp; &nb s, p; 15000-200000  
&nb, sp;  2-3月 &n bsp; &n bsp; 10000-100000 


附：各种情况下HCG转阴时间

  (1).人工流产（药物流产）后血HCG转正常约3W,个别可达4-8W.

  (2).自然流产7-8天个别达3W.

  (3).宫外孕为妊娠物清除后1-5W.

  (4).葡萄胎约12W. 
------------------------------------------------------------------------------------------------------------------
21. 怀孕时间与孕囊大小对应关系

        天 数                     孕 囊

         28                         4mm 
         32                         4.5mm 
         36                         6mm 
         40                         8mm 
         42                         11mm 
         44                         13-17mm 
         51                         18-22mm 
         52                         22-24mm 
         56                         27-31mm 
-------------------------------------------------------------------------------------------------------------------
22. 关于人工流产中的“无痛人工流产手术” 
   (1).什么是人工流产？ 
   人工流产是指采取手术或药物等方法终止12周以内的妊娠。目前常用的是普通人工流产手术，也有些地方正在开展“无痛人流”手术。无论

哪种手术都需要用器械进入子宫将胚胎取出。 
   (2).什么是无痛人流？ 
   应用镇痛或麻醉药物减轻术中疼痛，或使受术者意识消失而伴疼痛的短暂消失。镇痛或麻醉下的人流手术会对受术者的呼吸和循环能产生不

同程度的抑制，因而带来一定风险，因此对医院的麻醉和监护设施、麻醉医师及手术医生均有相应的要求。 
   (3).无痛人流能在几分钟内完成吗？ 
   无痛人流手术在术前需要做普通手术所要求的检查和消毒等准备工作外，还需要做一些与麻醉相关的检查。手术操作前需注射镇痛或麻醉药

物，待药物发挥作用后，受术者必须在生命体征的监护下才能接受手术。术后在意识恢复后还要观察1－2个小时，所以不可能在几分钟内完成

手术全部过程。 
   (4).无痛人流手术比普通人流手术风险多 
   人在麻醉后意识消失，全身松弛无知觉，对手术中可能出现的子宫和脏器损伤没有躯体反映，易造成手术并发症的漏诊。此外，镇痛药物或

麻醉药物又增加了药物副反映的风险，严重者可导致死亡。也就是说减痛或无痛人流手术比普通人流手术增加了一定的风险。所以不要相信某

些宣传中说得“无痛人流在睡梦中完成，安全无痛苦”。 
   (5).无痛人流手术的七大风险 
   (A).麻醉意外 所有麻醉药物都有发生麻醉意外的可能，一旦发生生命会出现难以预料和防范不及的后果，造成脏器功能障碍、残疾，甚至

死亡等。 
   (B).损伤 在无知觉的情况下做宫腔手术操作，增加子宫损伤，宫腔粘连、宫颈粘连，大出血的可能。 
   (C).感染 手术不仅增加各种生殖道感染的风险，若手术环境和器械消毒不彻底还有感染乙肝、艾滋病等严重传染病的可能。 
   (D).月经失调 无痛人流术后易导致月经不规则，月经量改变（月经量异常减少或闭经）。 
   (E).痛经 无痛人流术后有出现子宫内膜异位症的可能，导致经期腹痛等。 
   (F).再吃妊娠不良反应 手术可能造成子宫损伤或炎症、再次妊娠发生宫外孕、胎盘位置低或粘连或植入、早产或难产的可能。 
  ( G).继发不孕不育

    -----------------------------------------------------------------------------------------------------------------
23. 人流”暗藏的五大风险   
  
　　时下为数不少的初孕者轻率地做了人工流产手术。就人工流产本身来说，虽然是个相对安全、简便的小手术，但并非没有危险。人工流产

术常见的危险除手术过程中可能发生子宫穿孔、大出血、人流综合征等意外并发症外，术后仍有发生以下并发症的危险。  
  
　　(1).感染   以急性子宫内膜炎居多，也发生输卵管炎、盆腔结缔组织炎和腹膜炎。一旦患了输卵管炎，输卵管黏膜受损、管腔变窄，甚至

管腔堵塞，便可因此而丧失生育能力或发生宫外孕。

　　(2).宫颈或宫腔粘连  人工流产术时因吸宫负压过高、吸宫时间过长，宫腔受到过度搔刮，手术器械反复进出宫口等引起宫颈管及宫腔内

膜损伤，发生宫颈或宫腔粘连，表现为人流术后闭经或月经过多，周期性下腹痛，从而继发不孕。

　　(3).月经失调  少数妇女在人流术后出现月经不规则，经期延长，不能恢复每月一次的排卵功能，可引起不孕。

　　(4).子宫内膜异位症  人流术时吸宫负压突然降低，使蜕膜碎片随宫腔血水倒流入盆腔，并种植发展成子宫内膜异位症，表现为继发性痛

经进行性加重，形成不孕。

　　(5).再次妊娠可能有不良后果  人流术可能造成子宫内膜损伤或炎症。再次妊娠后因蜕膜发育不良，可发生胎盘粘连、植入、前置等异常

，因此而发生产前、产后出血、早产、死胎、死产、产后感染等机会均明显高于无人流史的孕妇。此外，Rh阴性血型妇女初孕人流后再次妊娠

时，因母儿Rh血型不合造成流产、死胎、新生儿溶血而死亡。

    同时，人工流产对受术者还有一定的心理影响。对一部分特别是农村孕妇、高龄孕妇、反复妊娠的孕妇，手术时往往有一定的心理压力。

大量的医学研究资料证实，人工流产本身也是一种不良刺激，尤其是对手术不够了解者，其精神压力更为严重。常见的表现为担心害怕、思想

忧虑、精神紧张、躯体不适等。未婚先孕者还要承受社会舆论等多方面的压力，往往担心他人知晓，甚至专门找一些偏僻的个体诊所，更容易

发生大出血、子宫穿孔与宫颈撕裂、羊水栓塞、人工流产综合征等并发症 
   ---------------------------------------------------------------------------------------------------------------- 
24. 人工清宫手术及药物流产的比较  
   药物流产的功率基本上是92％以上，人工流产也不是100％，人工流产也是在盲视下做的人工流产。 药物流产就是直接口服药，不做任何手

术，对病人没有任何的心理压力，心理压力比较小，再一个安全系数相对来说还是好一些。因为减少一些感染，上手术的时候有一些感染机会

。引起月经不调也少一些。但是打胎药有一个时间限制，应该在平均49天以内去做。 
  
　 人工流产从50年代开始做这个东西，刚开始是刮的方法，现在有电吸的方法，包括现在炒作的无痛人流，但是人工流产有一个大出血的问题

，还有感染的问题，还有一个子宫穿孔的问题，我们做手术看不见。要求我们人工流产的穿孔率是万分之几，是很低，不可能说不发生。

    人流手术是通过器械将胚胎组织都刮出来，刮宫之后的影响大家可想而知，子宫内膜相当于一块土地一样，土地要种种子，种子就是胚胎

。土地在你拼命清除的话，肥沃的土地可能变的很贫瘠，假如一个刮宫的医生拼命的给病人刮，把基底层都损害了，这样就没有办法长好。不

仅没有办法长好，因为过多的刮宫、过大的损伤会因为粘连，粘连之后就会导致月经量减少，所以有的人刮宫一次之后可能就导致月经减少和

粘连。

　　有人做一次打胎药流产可能都不会怀孕了，所以说做过人流月经量减少跟刮宫是有关系的，而且做人流以后有没有发烧，有没有引起宫腔

的改变也值得怀疑，比如有没有发烧的问题，有没有宫腔留出异物的问题，这些都需要了解的。

　　药物流产适合那些没有生过孩子的，比如年轻的人群，没有生过孩子，子宫没有受过刺激，宫口比较紧，做手术可能比较困难一些。还有

停经时间比较短，还有高危妊娠的，就是这个人剖腹产之后半年又怀孕了，因为子宫有一个斑痕，做手术有一个腹压，这样做药物流产，让胚

胎死掉以后，让自己慢慢往外排。人工流产适合50天以上这些病人，到70天以内，这些病人在门诊做人工流产，这些病人做人工流产的时候，

比如这个病人有子宫肌瘤的有影响，有的病人做药物流产有失败史，第一次做失败过，第二次不建议去做药流。

                     ==============================================================================


注意事项：１．在服用药流药后极少数人可能会出现轻微恶心／呕吐／头昏／乏力／肛门有坠涨感及过敏皮疹反应．约５％的人会有腹泻症状

．以上的现象并不会全部体现在同一个人的身上．请不要过于担心．

　　２．服药期间禁用停用其它甾体类药物．对于不明白何为甾体类药物的，只需做到不用其它药物就可以了．

　　３．服药期间不能吸烟．

　　４．服药期间忌食辛辣／生冷／油腻及不易消化的食物．我的建议是在这个特殊时期以流质的食物比如稀粥／汤为最佳．

    ５．多休息，保持充足的睡眠．

　　６．用药后，至少一个月内不能再次尝试**．

　　７．服用米非司酮时可正常进行工作和学习，到第三天服用米索前列醇时必须在家休息．

　　８．某些女性（尤其是以前有过流产史的）可是能米非司酮还未吃完就已经出现流血现象了，不必惊慌，余下的药物继续吃完即可．

　　应对措施：１．对于恶心症状较严重者，可口服维生素Ｂ６予以缓解．

　　２．对于白天工作很忙的，可选择在夜间服药．

　　３．皮肤有过敏反应的（例如手背痒）一般无需处理，自行消退．或口服维生素Ｃ及葡萄糖酸钙．

　　４．服用米索并出血后，注意观察排出妊娠物及胎囊．85%以上女性会当天排出．少部分次日或一周内排出（排尿时带出
               ========================================================================================
   药物流产药俗称打胎药，打胎药药的作用？客服QQ826614996电话13671785710药流简便、有效、无创伤，避免了进宫腔操作可能造成的并发

症。目前用于终止８周以内的妊娠。完全流产率已经达到90%―95%。流产药物在我国已经安全使用十余年，自1992年9月份由北京紫竹药业有限

公司生产国产全合成米非司酮片获准上市以来，在短短几年中，我国应用米非司酮片配伍前列腺素药物流产的妇女达数千万人次。并且随着研

究的深入，除用于抗早孕外，还用于72小时紧急避孕、异位妊娠、子宫肌瘤、子宫内膜异位症等。药流适合那些没有生过孩子的，比如年轻的

人群，小女孩，小女生，子宫没有受过刺激，宫口比较紧，做手术可能比较困难一些。还有停经时间比较短早孕患者，米非司酮片为一种新型

的抗孕激素药物，可起到诱导流产、终止早孕的作用。单独应用有效率为65%-85％，而与米索前列醇片合用，其成功率（即完全流产率）可高

达95％以上。它适用于停经49天以内、尿妊娠试验为阳性的孕妇，孕期愈短，效果愈好。但禁用于伴有哮喘、痉挛性支气管炎、心绞痛、心律

失常、心力衰竭、高血压、青光眼与肝、肾功能不全、异位妊、溃疡性结肠炎、肾上腺皮质切能不全、长期使用糖皮质类固醇激素.停经≤49天

之健康早孕妇女，空腹或进食2小时
后，口服25mg息隐一片，早晚各一次，共服三天，第四天清晨口服米索前列醇片600ug（200ug/片×3片），或于阴道后穹隆放置卡前列甲酯栓1

枚（1mg）。注意用药后出血情况，有无妊娠产物排出 ， 一般应用米非司酮片与米索前列醇片后，约2-3天；子宫腔内的胚囊即可排出，而子

宫中的蜕膜组织往往在2周左右才能慢慢排出，这称为完全流产。
     药物流产应用方便，可在家服药，不做手术，痛苦小，效果可靠，避免手术流产的疼痛及发生某些并发症，如：子宫穿孔，手术刺激引起

心律紊乱，甚至昏厥等，尤其对疤痕子宫、哺乳期怀孕子宫、子宫畸形更比较安全。达到有孕止孕、无孕催经的目的，对许多恐惧器械性流产

的女性很适宜。米非司酮片为受体水平抗孕激素药，具有终止早孕、抗着床、诱导月经及促进宫颈成熟等作用，与孕酮竞争受体而达到拮抗孕

酮的作用，与糖皮质激素受体亦有一定结合力。米非司酮片能明显增高妊娠子宫对前列腺素的敏感性。小剂量息隐序贯合并前列腺素类药物，

可得到满意的终止早孕效果。药物流产目前在全世界四个国家开展（法国、英国、瑞典、中国）流产药物（Ru486）最早是法国的Roussel―

Uclof公司生产。药流的成功率为90％～95％.药物流产与手术流产一样，流产后的妇女
要做好个人卫生保健，注意保持局部清洁，每天清洗外阴，使用清洁的卫生巾。因为流产后子宫尚未完全复原，宫口未完全关闭，所要避免性

生活，以防止感染。最好能禁欲1个月，尤其出血未止时，一定不要尝试xingjiao 



附：各种情况下HCG转阴时间

  (1).人工流产（药物流产）后血HCG转正常约3W,个别可达4-8W.

  (2).自然流产7-8天个别达3W.

  (3).宫外孕为妊娠物清除后1-5W.

  (4).葡萄胎约12W. 
------------------------------------------------------------------------------------------------------------------
21. 怀孕时间与孕囊大小对应关系

        天 数                     孕 囊

         28                         4mm 
         32                         4.5mm 
         36                         6mm 
         40                         8mm 
         42                         11mm 
         44                         13-17mm 
         51                         18-22mm 
         52                         22-24mm 
         56                         27-31mm 
-------------------------------------------------------------------------------------------------------------------

22. 关于人工流产中的“无痛人工流产手术” 
   (1).什么是人工流产？ 
   人工流产是指采取手术或药物等方法终止12周以内的妊娠。目前常用的是普通人工流产手术，也有些地方正在开展“无痛人流”手术。无论

哪种手术都需要用器械进入子宫将胚胎取出。 
   (2).什么是无痛人流？ 
   应用镇痛或麻醉药物减轻术中疼痛，或使受术者意识消失而伴疼痛的短暂消失。镇痛或麻醉下的人流手术会对受术者的呼吸和循环能产生不

同程度的抑制，因而带来一定风险，因此对医院的麻醉和监护设施、麻醉医师及手术医生均有相应的要求。 
   (3).无痛人流能在几分钟内完成吗？ 
   无痛人流手术在术前需要做普通手术所要求的检查和消毒等准备工作外，还需要做一些与麻醉相关的检查。手术操作前需注射镇痛或麻醉药

物，待药物发挥作用后，受术者必须在生命体征的监护下才能接受手术。术后在意识恢复后还要观察1－2个小时，所以不可能在几分钟内完成

手术全部过程。 
   (4).无痛人流手术比普通人流手术风险多 
   人在麻醉后意识消失，全身松弛无知觉，对手术中可能出现的子宫和脏器损伤没有躯体反映，易造成手术并发症的漏诊。此外，镇痛药物或

麻醉药物又增加了药物副反映的风险，严重者可导致死亡。也就是说减痛或无痛人流手术比普通人流手术增加了一定的风险。所以不要相信某

些宣传中说得“无痛人流在睡梦中完成，安全无痛苦”。 
   (5).无痛人流手术的七大风险 
   (A).麻醉意外 所有麻醉药物都有发生麻醉意外的可能，一旦发生生命会出现难以预料和防范不及的后果，造成脏器功能障碍、残疾，甚至

死亡等。 
   (B).损伤 在无知觉的情况下做宫腔手术操作，增加子宫损伤，宫腔粘连、宫颈粘连，大出血的可能。 
   (C).感染 手术不仅增加各种生殖道感染的风险，若手术环境和器械消毒不彻底还有感染乙肝、艾滋病等严重传染病的可能。 
   (D).月经失调 无痛人流术后易导致月经不规则，月经量改变（月经量异常减少或闭经）。 
   (E).痛经 无痛人流术后有出现子宫内膜异位症的可能，导致经期腹痛等。 
   (F).再吃妊娠不良反应 手术可能造成子宫损伤或炎症、再次妊娠发生宫外孕、胎盘位置低或粘连或植入、早产或难产的可能。 
  ( G).继发不孕不育

    -----------------------------------------------------------------------------------------------------------------
23. 人流”暗藏的五大风险   
  
　　时下为数不少的初孕者轻率地做了人工流产手术。就人工流产本身来说，虽然是个相对安全、简便的小手术，但并非没有危险。人工流产

术常见的危险除手术过程中可能发生子宫穿孔、大出血、人流综合征等意外并发症外，术后仍有发生以下并发症的危险。  
  
　　(1).感染   以急性子宫内膜炎居多，也发生输卵管炎、盆腔结缔组织炎和腹膜炎。一旦患了输卵管炎，输卵管黏膜受损、管腔变窄，甚至

管腔堵塞，便可因此而丧失生育能力或发生宫外孕。

　　(2).宫颈或宫腔粘连  人工流产术时因吸宫负压过高、吸宫时间过长，宫腔受到过度搔刮，手术器械反复进出宫口等引起宫颈管及宫腔内

膜损伤，发生宫颈或宫腔粘连，表现为人流术后闭经或月经过多，周期性下腹痛，从而继发不孕。

　　(3).月经失调  少数妇女在人流术后出现月经不规则，经期延长，不能恢复每月一次的排卵功能，可引起不孕。

　　(4).子宫内膜异位症  人流术时吸宫负压突然降低，使蜕膜碎片随宫腔血水倒流入盆腔，并种植发展成子宫内膜异位症，表现为继发性痛

经进行性加重，形成不孕。

　　(5).再次妊娠可能有不良后果  人流术可能造成子宫内膜损伤或炎症。再次妊娠后因蜕膜发育不良，可发生胎盘粘连、植入、前置等异常

，因此而发生产前、产后出血、早产、死胎、死产、产后感染等机会均明显高于无人流史的孕妇。此外，Rh阴性血型妇女初孕人流后再次妊娠

时，因母儿Rh血型不合造成流产、死胎、新生儿溶血而死亡。

    同时，人工流产对受术者还有一定的心理影响。对一部分特别是农村孕妇、高龄孕妇、反复妊娠的孕妇，手术时往往有一定的心理压力。

大量的医学研究资料证实，人工流产本身也是一种不良刺激，尤其是对手术不够了解者，其精神压力更为严重。常见的表现为担心害怕、思想

忧虑、精神紧张、躯体不适等。未婚先孕者还要承受社会舆论等多方面的压力，往往担心他人知晓，甚至专门找一些偏僻的个体诊所，更容易

发生大出血、子宫穿孔与宫颈撕裂、羊水栓塞、人工流产综合征等并发症 
   ---------------------------------------------------------------------------------------------------------------- 
24. 人工清宫手术及药物流产的比较  
   药物流产的功率基本上是92％以上，人工流产也不是100％，人工流产也是在盲视下做的人工流产。 药物流产就是直接口服药，不做任何手

术，对病人没有任何的心理压力，心理压力比较小，再一个安全系数相对来说还是好一些。因为减少一些感染，上手术的时候有一些感染机会

。引起月经不调也少一些。但是打胎药有一个时间限制，应该在平均49天以内去做。 
  
　 人工流产从50年代开始做这个东西，刚开始是刮的方法，现在有电吸的方法，包括现在炒作的无痛人流，但是人工流产有一个大出血的问题

，还有感染的问题，还有一个子宫穿孔的问题，我们做手术看不见。要求我们人工流产的穿孔率是万分之几，是很低，不可能说不发生。

    人流手术是通过器械将胚胎组织都刮出来，刮宫之后的影响大家可想而知，子宫内膜相当于一块土地一样，土地要种种子，种子就是胚胎

。土地在你拼命清除的话，肥沃的土地可能变的很贫瘠，假如一个刮宫的医生拼命的给病人刮，把基底层都损害了，这样就没有办法长好。不

仅没有办法长好，因为过多的刮宫、过大的损伤会因为粘连，粘连之后就会导致月经量减少，所以有的人刮宫一次之后可能就导致月经减少和

粘连。

　　有人做一次打胎药流产可能都不会怀孕了，所以说做过人流月经量减少跟刮宫是有关系的，而且做人流以后有没有发烧，有没有引起宫腔

的改变也值得怀疑，比如有没有发烧的问题，有没有宫腔留出异物的问题，这些都需要了解的。

　　药物流产适合那些没有生过孩子的，比如年轻的人群，没有生过孩子，子宫没有受过刺激，宫口比较紧，做手术可能比较困难一些。还有

停经时间比较短，还有高危妊娠的，就是这个人剖腹产之后半年又怀孕了，因为子宫有一个斑痕，做手术有一个腹压，这样做药物流产，让胚

胎死掉以后，让自己慢慢往外排。人工流产适合50天以上这些病人，到70天以内，这些病人在门诊做人工流产，这些病人做人工流产的时候，

比如这个病人有子宫肌瘤的有影响，有的病人做药物流产有失败史，第一次做失败过，第二次不建议去做药流。

                     ==============================================================================


注意事项：１．在服用药流药后极少数人可能会出现轻微恶心／呕吐／头昏／乏力／肛门有坠涨感及过敏皮疹反应．约５％的人会有腹泻症状

．以上的现象并不会全部体现在同一个人的身上．请不要过于担心．

　　２．服药期间禁用停用其它甾体类药物．对于不明白何为甾体类药物的，只需做到不用其它药物就可以了．

　　３．服药期间不能吸烟．

　　４．服药期间忌食辛辣／生冷／油腻及不易消化的食物．我的建议是在这个特殊时期以流质的食物比如稀粥／汤为最佳．

    ５．多休息，保持充足的睡眠．

　　６．用药后，至少一个月内不能再次尝试**．

　　７．服用米非司酮时可正常进行工作和学习，到第三天服用米索前列醇时必须在家休息．

　　８．某些女性（尤其是以前有过流产史的）可是能米非司酮还未吃完就已经出现流血现象了，不必惊慌，余下的药物继续吃完即, 可．

　　应对措施：１．对于恶心症状, 较严重者，可口服维生素Ｂ６予以缓解．

,
　　２．对于白天工作很忙的，可选择在夜间服药．

　　３．皮肤有过敏反应的（例如手背痒）一般无需处理，自行消退．或口服维生素Ｃ及葡萄糖酸钙．

　　４．服用米索并出血后，注意观察排出妊娠物及胎囊．85%以上女性会当天排出．少部分次日或一周内排出（排尿时带出
 ========================================================================================
   药物流产药俗称打胎药，打胎药药的作用？药流简便、有效、无创伤，避免了进宫腔操作可能造成的并发

症。目前用于终止８周以内的妊娠。完全流产率已经达到90%―95%。流产药物在我国已经安全使用十余年，自1992年9月份由北京紫竹药业有限

公司生产国产全合成米非司酮片获准上市以来，在短短几年中，我国应用米非司酮片配伍前列腺素药物流产的妇女达数千万人次。并且随着研

究的深入，除用于抗早孕外，还用于72小时紧急避孕、异位妊娠、子宫肌瘤、子宫内膜异位症等。药流适合那些没有生过孩子的，比如年轻的

人群，小女孩，小女生，子宫没有受过刺激，宫口比较紧，做手术可能比较困难一些。还有停经时间比较短早孕患者，米非司酮片为一种新型

的抗孕激素药物，可起到诱导流产、终止早孕的作用。单独应用有效率为65%-85％，而与米索前列醇片合用，其成功率（即完全流产率）可高

达95％以上。它适用于停经49天以内、尿妊娠试验为阳性的孕妇，孕期愈短，效果愈好。但禁用于伴有哮喘、痉挛性支气管炎、心绞痛、心律

失常、心力衰竭、高血压、青光眼与肝、肾功能不全、异位妊、溃疡性结肠炎、肾上腺皮质切能不全、长期使用糖皮质类固醇激素.停经≤49天

之健康早孕妇女，空腹或进食2小时
后，口服25mg息隐一片，早晚各一次，共服三天，第四天清晨口服米索前列醇片600ug（200ug/片×3片），或于阴道后穹隆放置卡前列甲酯栓1

枚（1mg）。注意用药后出血情况，有无妊娠产物排出 ， 一般应用米非司酮片与米索前列醇片后，约2-3天；子宫腔内的胚囊即可排出，而子

宫中的蜕膜组织往往在2周左右才能慢慢排出，这称为完全流产。
     药物流产应用方便，可在家服药，不做手术，痛苦小，效果可靠，避免手术流产的疼痛及发生某些并发症，如：子宫穿孔，手术刺激引起

心律紊乱，甚至昏厥等，尤其对疤痕子宫、哺乳期怀孕子宫、子宫畸形更比较安全。达到有孕止孕、无孕催经的目的，对许多恐惧器械性流产

的女性很适宜。米非司酮片为受体水平抗孕激素药，具有终止早孕、抗着床、诱导月经及促进宫颈成熟等作用，与孕酮竞争受体而达到拮抗孕

酮的作用，与糖皮质激素受体亦有一定结合力。米非司酮片能明显增高妊娠子宫对前列腺素的敏感性。小剂量息隐序贯合并前列腺素类药物，

可得到满意的终止早孕效果。药物流产目前在全世界四个国家开展（法国、英国、瑞典、中国）流产药物（Ru486）最早是法国的Roussel―

Uclof公司生产。药流的成功率为90％～95％.药物流产与手术流产一样，流产后的妇女
要做好个人卫生保健，注意保持局部清洁，每天清洗外阴，使用清洁的卫生巾。因为流产后子宫尚未完全复原，宫口未完全关闭，所要避免性

生活，以防止感染。最好能禁欲1个月，尤其出血未止时，一定不要尝试xingjiao   
